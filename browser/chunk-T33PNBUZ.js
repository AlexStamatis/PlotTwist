import{L as n,db as s,eb as c,kb as m,pb as a,w as l,z as o}from"./chunk-P4JO3VSF.js";var u=class i{constructor(e,t){this.http=e;this.router=t}apikey=a.tmdbApiKey;baseUrl=a.tmdbBaseUrl;isLoggedIn=n(!!localStorage.getItem("session_id"));username=n(localStorage.getItem("username"));requestToken(){let e=`${this.baseUrl}/authentication/token/new`,t=new s().set("api_key",this.apikey);return this.http.get(e,{params:t})}redirectToTmdbAuth(e){let t=`https://www.themoviedb.org/authenticate/${e}?redirect_to=http://localhost:4200/auth/done`;window.location.href=t}createSession(e){let t=`${this.baseUrl}/authentication/session/new`,r=new s().set("api_key",this.apikey);return this.http.post(t,{request_token:e},{params:r})}getAccountDetails(e){let t=`${this.baseUrl}/account`,r=new s().set("api_key",this.apikey).set("session_id",e);return this.http.get(t,{params:r})}login(e,t,r){localStorage.setItem("session_id",e),localStorage.setItem("username",t),localStorage.setItem("user_id",r),this.isLoggedIn.set(!0),this.username.set(t)}logout(){localStorage.removeItem("session_id"),localStorage.removeItem("username"),localStorage.removeItem("user_id"),this.isLoggedIn.set(!1),this.username.set(null),this.router.navigate(["/"])}getSessionId(){return localStorage.getItem("session_id")||""}getAccountId(){return localStorage.getItem("user_id")}static \u0275fac=function(t){return new(t||i)(o(c),o(m))};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};export{u as a};
