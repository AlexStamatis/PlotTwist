import{a as h}from"./chunk-2JD2XSZ2.js";import{R as i,T as s,ha as u,ia as c,ib as m,kb as d,za as p}from"./chunk-P4JO3VSF.js";var v=class n{constructor(t,e,o){this.route=t;this.router=e;this.authService=o}ngOnInit(){let t=this.route.snapshot.queryParamMap.get("request_token"),e=this.route.snapshot.queryParamMap.get("approved");t&&e==="true"?this.authService.createSession(t).subscribe({next:o=>{let a=o.session_id;this.authService.getAccountDetails(a).subscribe({next:r=>{this.authService.login(a,r.username,r.id),localStorage.setItem("user_id",r.id),this.router.navigate(["/"])}})},error:o=>{console.error("Failed to get account details:",o),this.router.navigate(["/"])}}):(console.warn("Token not approved or missing"),this.router.navigate(["/"]))}static \u0275fac=function(e){return new(e||n)(i(m),i(d),i(h))};static \u0275cmp=s({type:n,selectors:[["app-auth-done"]],decls:2,vars:0,template:function(e,o){e&1&&(u(0,"p"),p(1,"Logging you in with TMDB..."),c())},encapsulation:2})};export{v as AuthDoneComponent};
