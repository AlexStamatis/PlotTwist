import{a as ot}from"./chunk-3SOM3KWB.js";import{a as qe,b as We,c as Ge,d as Qe,e as Ke,f as Ze,g as Je,h as Xe,i as et,j as tt,k as nt}from"./chunk-HN6EORLH.js";import{a as $}from"./chunk-6BKZ3TYD.js";import{a as y}from"./chunk-VXYLYJCB.js";import{a as Ye}from"./chunk-T33PNBUZ.js";import{$ as c,$a as Ve,Aa as q,Ba as B,D as we,E as P,F as x,Ga as ne,I as W,Ia as K,Ja as Re,L as a,La as ee,Ma as De,N as G,Na as Me,O as Oe,P as s,Pa as Ee,Qa as Ne,R as v,Sa as ye,T as C,W as Se,Wa as Ae,Xa as Z,Y as b,Ya as J,_a as Le,ba as A,bb as D,cb as je,da as O,fa as k,fb as Be,ga as F,gb as ze,ha as r,hb as z,ia as i,ja as _,jb as $e,ka as ke,kb as R,l as j,la as Fe,lb as oe,mb as Ue,na as T,nb as He,ob as X,pa as g,qa as f,ta as Q,ya as Ie,za as d}from"./chunk-P4JO3VSF.js";function at(n,t){if(n&1){let e=T();r(0,"li")(1,"a",4),g("click",function(){let p=P(e).$implicit,l=f();return x(l.onSelect(p))}),d(2),i()()}if(n&2){let e=t.$implicit;s(2),B(" ",e,"")}}var ie=class n{category="";options=[];selectionChanged=new W;selected=a(null);onSelect(t){this.selected.set(t),this.selectionChanged.emit(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-dropdown"]],inputs:{category:"category",options:"options"},outputs:{selectionChanged:"selectionChanged"},decls:5,vars:2,consts:[[1,"dropdown"],["data-toggle","dropdown"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1),d(2),i(),r(3,"ul",2),b(4,at,3,1,"li",3),i()()),e&2&&(s(2),B(" ",o.category," "),s(2),c("ngForOf",o.options))},dependencies:[D,Z],encapsulation:2})};var pt=n=>["/u",n,"favorites"],lt=n=>["/u",n,"watchlist"],ct=n=>["/u",n,"ratings"];function dt(n,t){if(n&1){let e=T();ke(0),r(1,"span",9),d(2),i(),r(3,"div",10)(4,"button",11),d(5),i(),r(6,"ul",12)(7,"li")(8,"a",13),d(9,"Favorites"),i()(),r(10,"li")(11,"a",13),d(12,"Watchlist"),i()(),r(13,"li")(14,"a",13),d(15,"Ratings"),i()()()(),r(16,"button",14),g("click",function(){P(e);let p=f();return x(p.logout())}),d(17," Logout "),i(),Fe()}if(n&2){let e,o=f();s(2),B("Welcome, ",o.username(),""),s(3),B(" ",(e=o.username())==null?null:e.charAt(0),""),s(3),c("routerLink",K(5,pt,o.username())),s(3),c("routerLink",K(7,lt,o.username())),s(3),c("routerLink",K(9,ct,o.username()))}}function mt(n,t){if(n&1){let e=T();r(0,"button",15),g("click",function(){P(e);let p=f();return x(p.startLogin())}),_(1,"i",16),d(2," Login or Register "),i()}}var re=class n{constructor(t,e){this.router=t;this.authService=e}moviesOptions=["Popular","Now Playing","Upcoming","Top Rated"];tvshowsOptions=["Popular","Airing Today","On TV","Top Rated"];peopleOptions=["Popular People"];isLoggedIn=ye(()=>this.authService.isLoggedIn());username=ye(()=>this.authService.username());routeMap={movies:{Popular:"/movie","Now Playing":"/movie/now-playing",Upcoming:"/movie/upcoming","Top Rated":"/movie/top-rated"},tv:{Popular:"/tv","Airing Today":"/tv/airing-today","On TV":"/tv/on-tv","Top Rated":"/tv/top-rated"},people:{"Popular People":"/people"}};onDropdownSelect(t,e){let o=this.routeMap[t]?.[e];o&&this.router.navigate([o])}sendHome(){this.router.navigate(["/"])}startLogin(){this.authService.requestToken().subscribe({next:t=>{let e=t.request_token;this.authService.redirectToTmdbAuth(e)},error:t=>{console.error("Error requesting token",t)}})}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||n)(v(R),v(Ye))};static \u0275cmp=C({type:n,selectors:[["app-header"]],decls:16,vars:8,consts:[["loggedOut",""],[1,"d-flex","justify-content-between","header-container"],[1,"d-flex"],[1,"logo-container",2,"cursor","pointer",3,"click"],[1,"navbar","header-navbar"],[1,"navbar-options"],[3,"selectionChanged","category","options"],[1,"d-flex","align-items-center"],[4,"ngIf","ngIfElse"],[1,"text-white"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-light","rounded-circle","text-uppercase","fw-bold",2,"width","40px","height","40px"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"routerLink"],[1,"btn","btn-sm","btn-danger","ms-2",3,"click"],["type","button",1,"login-btn","align-self-center",3,"click"],[1,"fa-solid","fa-user"]],template:function(e,o){if(e&1){let p=T();r(0,"div",1)(1,"div",2)(2,"div",3),g("click",function(){return P(p),x(o.sendHome())}),r(3,"p"),d(4,"Plot Twist"),i()(),r(5,"nav",4)(6,"a",5)(7,"app-dropdown",6),g("selectionChanged",function(I){return P(p),x(o.onDropdownSelect("movies",I))}),i()(),r(8,"a",5)(9,"app-dropdown",6),g("selectionChanged",function(I){return P(p),x(o.onDropdownSelect("tv",I))}),i()(),r(10,"a",5)(11,"app-dropdown",6),g("selectionChanged",function(I){return P(p),x(o.onDropdownSelect("people",I))}),i()()()(),r(12,"div",7),b(13,dt,18,11,"ng-container",8)(14,mt,3,0,"ng-template",null,0,Ee),i()()}if(e&2){let p=Ie(15);s(7),c("category","Movies")("options",o.moviesOptions),s(2),c("category","TV Shows")("options",o.tvshowsOptions),s(2),c("category","People")("options",o.peopleOptions),s(2),c("ngIf",o.isLoggedIn())("ngIfElse",p)}},dependencies:[D,J,ie,X,oe],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .header-container[_ngcontent-%COMP%]{max-width:1300px;flex-wrap:wrap;margin:auto}[_nghost-%COMP%]   .logo-container[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{color:#ce3c0f;font-size:50px;font-family:cursive}[_nghost-%COMP%]   .header-navbar[_ngcontent-%COMP%]{display:flex;font-size:18px;justify-content:space-between;cursor:pointer}[_nghost-%COMP%]   .navbar-options[_ngcontent-%COMP%]{font-weight:700;margin:10px;color:#fff}[_nghost-%COMP%]   .navbar-options[_ngcontent-%COMP%]:hover{color:#dfdcd5}[_nghost-%COMP%]   .login-btn[_ngcontent-%COMP%]{border:none;outline:none;padding:4px 10px;background-color:#ce3c0f;color:#fff;font-weight:700;border-radius:30px;height:40px;cursor:pointer}[_nghost-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background-color:#fe3030}[_nghost-%COMP%]   .fa-user[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   .d-flex.align-items-center[_ngcontent-%COMP%]   span.text-white[_ngcontent-%COMP%]{margin-right:12px;font-weight:500;font-size:16px}[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .btn-outline-light[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:none;width:40px;height:40px;border-radius:50%;font-weight:700;font-size:18px;text-align:center;padding:0;line-height:40px}[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .btn-outline-light[_ngcontent-%COMP%]:hover{background-color:#ddd;color:#000}[_nghost-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#333}"]})};var se=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-footer"]],decls:12,vars:0,consts:[[1,"footer-container"],[1,"footer-links"],["href","#"]],template:function(e,o){e&1&&(r(0,"footer",0)(1,"h3"),d(2,"Plot Twist"),i(),r(3,"p"),d(4,"\xA92025.All rights reserved"),i(),r(5,"div",1)(6,"a",2),d(7,"About"),i(),r(8,"a",2),d(9,"Contact"),i(),r(10,"a",2),d(11,"Privacy"),i()()())},styles:["[_nghost-%COMP%]{display:block}.footer-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;background-color:#0d083a;color:#ffffffd9;text-align:center;align-items:center;justify-content:center;width:100%;min-height:100px}h3[_ngcontent-%COMP%]{color:#ce3c0f;font-size:30px;font-family:cursive}.footer-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0 0 0 30px;align-items:center}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffffffb3;margin-left:30px;text-decoration:none;font-size:14px;transition:color .3s}.footer-links[_ngcontent-%COMP%]{display:flex;gap:5px;justify-content:center;flex-wrap:wrap}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}@media (max-width: 600px){.footer-container[_ngcontent-%COMP%]{padding:15px 10px}.footer-links[_ngcontent-%COMP%]{gap:10px}}"]})};var ae=class n{title="PlotTwist";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(e,o){e&1&&_(0,"app-header")(1,"router-outlet")(2,"app-footer")},dependencies:[$e,X,re,se],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}router-outlet[_ngcontent-%COMP%]{flex-grow:1}"]})};var gt=n=>({"active-button":n});function ut(n,t){if(n&1){let e=T();r(0,"button",2),g("focus",function(){let p=P(e).$implicit,l=f();return x(l.onBtnFocus(p))})("click",function(){let p=P(e).$implicit,l=f();return x(l.onBtnClick(p))}),d(1),i()}if(n&2){let e=t.$implicit;c("ngClass",K(2,gt,e.isActive)),s(),B(" ",e.btnName," ")}}var pe=class n{options=[];optionChanged=new W;selectedOption=a("");onBtnClick(t){this.options.forEach(e=>e.isActive=!1),t.isActive=!0,this.selectedOption.set(t.btnName),this.optionChanged.emit(t.btnName)}onBtnFocus(t){this.options.forEach(e=>{t.btnName===e.btnName?e.isActive=!0:e.isActive=!1})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-toggle-button"]],inputs:{options:"options"},outputs:{optionChanged:"optionChanged"},decls:2,vars:1,consts:[[1,"toggle-container"],["class","toggle-button",3,"ngClass","focus","click",4,"ngFor","ngForOf"],[1,"toggle-button",3,"focus","click","ngClass"]],template:function(e,o){e&1&&(r(0,"div",0),b(1,ut,2,4,"button",1),i()),e&2&&(s(),c("ngForOf",o.options))},dependencies:[D,Ae,Z],styles:[".toggle-container[_ngcontent-%COMP%]{display:inline-flex;background-color:#f0f0f0;border-radius:20px;margin-left:10px;margin-top:5px;overflow:hidden}.toggle-button[_ngcontent-%COMP%]{display:flex;border:none;border-radius:20px;font-size:16px;font-weight:500;align-items:center;height:35px;padding:8px 20px;cursor:pointer;z-index:1}.active-button[_ngcontent-%COMP%]{background-color:#007bff;z-index:2}"]})};var ft=(n,t)=>["/",n,t],N=class n{constructor(t){this.router=t}title;posterPath;releaseDate;voteAverage;movieId;mediaType="movie";static \u0275fac=function(e){return new(e||n)(v(R))};static \u0275cmp=C({type:n,selectors:[["app-movie-card"]],inputs:{title:"title",posterPath:"posterPath",releaseDate:"releaseDate",voteAverage:"voteAverage",movieId:"movieId",mediaType:"mediaType"},decls:13,vars:16,consts:[[1,"movie-card","position-relative","overflow-hidden",3,"routerLink"],[1,"image-wrapper","position-relative"],[3,"src","alt"],[1,"rating-badge"],[1,"card-body"],[1,"title",3,"title"],[1,"release-date"],[1,"fa-solid","fa-calendar"]],template:function(e,o){e&1&&(r(0,"a",0)(1,"div",1),_(2,"img",2),r(3,"div",3),d(4),ee(5,"number"),i()(),r(6,"div",4)(7,"h5",5),d(8),i(),r(9,"div",6),_(10,"i",7),d(11),ee(12,"date"),i()()()),e&2&&(c("routerLink",Re(13,ft,o.mediaType,o.movieId)),s(2),Q("alt",o.title),c("src","https://image.tmdb.org/t/p/w500/"+o.posterPath,G),s(2),B(" ",o.voteAverage>0?Me(5,7,o.voteAverage,"1.1-1"):"NR"," "),s(3),c("title",o.title),s(),q(o.title),s(3),B(" ",Me(12,10,o.releaseDate,"longDate")," "))},dependencies:[D,Ve,Le,X,oe],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .movie-card[_ngcontent-%COMP%]{display:block;width:230px;justify-content:center;flex-shrink:0;background-color:#fff;border-radius:12px;overflow:hidden;display:flex;flex-direction:column;height:100%;text-decoration:none}[_nghost-%COMP%]   .image-wrapper[_ngcontent-%COMP%]{position:relative;height:360px}[_nghost-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block;border-top-left-radius:12px;border-top-right-radius:12px}[_nghost-%COMP%]   .card-body[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:5px 9px;color:#000;height:100px}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-size:19px;font-weight:600;margin-top:5px;line-height:1.2;line-clamp:2;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}[_nghost-%COMP%]   .release-date[_ngcontent-%COMP%]{font-size:17px;color:#161515;display:flex;align-items:center;gap:4px}[_nghost-%COMP%]   .rating-badge[_ngcontent-%COMP%]{position:absolute;bottom:-10px;background-color:#354245d9;color:#f1b903;border-radius:50%;width:40px;height:40px;font-size:15px;font-weight:700;display:flex;justify-content:center;align-items:center;box-shadow:0 2px 6px #0000004d;z-index:1;margin-left:7px}[_nghost-%COMP%]   .rating-badge[_ngcontent-%COMP%]:hover{transform:scale(1.1)}[_nghost-%COMP%]   .fa-calendar[_ngcontent-%COMP%]{margin-right:5px}"]})};var le=class n{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}static \u0275fac=function(e){return new(e||n)(v(ze,16))};static \u0275pipe=Se({name:"safe",type:n,pure:!0})};var ce=class n{constructor(t){this.ngbActiveModal=t}modalTitle;youtubeUrl;onClose(){this.ngbActiveModal.close()}static \u0275fac=function(e){return new(e||n)(v(et))};static \u0275cmp=C({type:n,selectors:[["app-trailer-modal"]],inputs:{modalTitle:"modalTitle",youtubeUrl:"youtubeUrl"},decls:9,vars:4,consts:[[1,"modal-content","p-0"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",2,"filter","invert(1)",3,"click"],[1,"modal-body"],[1,"video-container"],["id","youtubeIframe","width","100%","height","100%","frameborder","0","allowfullscreen","",3,"src"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),d(3),i(),r(4,"button",3),g("click",function(){return o.onClose()}),i()(),r(5,"div",4)(6,"div",5),_(7,"iframe",6),ee(8,"safe"),i()()()),e&2&&(s(3),q(o.modalTitle),s(4),c("src",De(8,2,"https://www.youtube.com/embed/"+o.youtubeUrl),Oe))},dependencies:[le],styles:["[_nghost-%COMP%]   .video-container[_ngcontent-%COMP%]{height:600px}[_nghost-%COMP%]   .modal-title[_ngcontent-%COMP%]{opacity:.75}[_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%]{border:none}[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]{color:#fff;background-color:#000;border-bottom:none}[_nghost-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:5px;background-color:#000}[_nghost-%COMP%]   .btn-close[_ngcontent-%COMP%]:focus{box-shadow:none}"]})};var de=class n{constructor(t){this.ngbModal=t}trailer;openTrailerModal(){let t=this.ngbModal.open(ce,{size:"xl",centered:!0});t.componentInstance.modalTitle=this.trailer.title,t.componentInstance.youtubeUrl=this.trailer.key}get thumbnailUrl(){return`https://img.youtube.com/vi/${this.trailer.key}/hqdefault.jpg`}get videoUrl(){return`https://www.youtube.com/watch?v=${this.trailer.key}`}static \u0275fac=function(e){return new(e||n)(v(tt))};static \u0275cmp=C({type:n,selectors:[["app-trailer-card"]],inputs:{trailer:"trailer"},decls:7,vars:4,consts:[[1,"trailer-card",3,"click"],[1,"thumbnail-wrapper"],["loading","lazy",3,"src","alt"],[1,"fa-solid","fa-play","play-icon"],[1,"title"],[3,"title"]],template:function(e,o){e&1&&(r(0,"div",0),g("click",function(){return o.openTrailerModal()}),r(1,"div",1),_(2,"img",2)(3,"i",3),i(),r(4,"div",4)(5,"p",5),d(6),i()()()),e&2&&(s(2),Q("alt",o.trailer.title),c("src",o.thumbnailUrl,G),s(3),c("title",o.trailer.title),s(),B("",o.trailer.title," "))},dependencies:[D,nt],styles:["[_nghost-%COMP%]   .trailer-card[_ngcontent-%COMP%]{width:370px;background:#fff;border-radius:10px;text-align:center;transition:transform .3s ease,box-shadow .3s ease}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:100%;display:block}[_nghost-%COMP%]   .trailer-card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 20px #0003}[_nghost-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]{position:relative;display:block}[_nghost-%COMP%]   .play-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:36px;color:#fff;background-color:#0009;border-radius:30%;padding:14px}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{text-wrap:nowrap;font-size:large;font-family:cursive}"]})};var me=(n,t)=>t.id;function ht(n,t){if(n&1){let e=T();r(0,"button",7),g("click",function(){P(e);let p=f();return x(p.clearSearch())}),d(1," Clear "),i()}}function vt(n,t){n&1&&_(0,"app-search-results")}function _t(n,t){if(n&1&&_(0,"app-movie-card",13),n&2){let e=t.$implicit;c("title",e.title||e.name)("posterPath",e.poster_path)("releaseDate",e.release_date||e.first_air_date)("voteAverage",e.vote_average)("movieId",e.id)("mediaType",e.media_type)}}function Ct(n,t){if(n&1&&_(0,"app-trailer-card",20),n&2){let e=t.$implicit;c("trailer",e)}}function bt(n,t){if(n&1&&k(0,Ct,1,1,"app-trailer-card",20,me),n&2){let e=f(2);F(e.movieTrailers())}}function Pt(n,t){if(n&1&&_(0,"app-trailer-card",20),n&2){let e=t.$implicit;c("trailer",e)}}function xt(n,t){if(n&1&&k(0,Pt,1,1,"app-trailer-card",20,me),n&2){let e=f(2);F(e.tvTrailers())}}function Tt(n,t){if(n&1&&_(0,"app-movie-card",13),n&2){let e=t.$implicit;c("title",e.title||e.name)("posterPath",e.poster_path)("releaseDate",e.release_date||e.first_air_date)("voteAverage",e.vote_average)("movieId",e.id)("mediaType",e.media_type)}}function Mt(n,t){if(n&1){let e=T();r(0,"div")(1,"div",8)(2,"p"),d(3,"Trending"),i(),r(4,"div",9)(5,"app-toggle-button",10),g("optionChanged",function(p){P(e);let l=f();return x(l.onToggleChange(p))}),i()()(),r(6,"div",11)(7,"div",12),k(8,_t,1,6,"app-movie-card",13,me),i()(),r(10,"div",14)(11,"p"),d(12,"Trailers"),i(),r(13,"div",9)(14,"app-toggle-button",10),g("optionChanged",function(p){P(e);let l=f();return x(l.onToggleChangeTrailers(p))}),i()()(),r(15,"div",15)(16,"div",16),b(17,bt,2,0)(18,xt,2,0),i()(),r(19,"div",17)(20,"p"),d(21,"Plot Twist Recommends"),i(),r(22,"div",9)(23,"app-toggle-button",10),g("optionChanged",function(p){P(e);let l=f();return x(l.onToggleChangeRecommended(p))}),i()()(),r(24,"div",18)(25,"div",19),k(26,Tt,1,6,"app-movie-card",13,me),i()()()}if(n&2){let e=f();s(5),c("options",e.buttonOptions),s(3),F(e.trendingItems()),s(6),c("options",e.buttonOptionsTrailers),s(3),O(e.mediaTypeTrailers()==="movies"||e.mediaTypeTrailers()==="Released This Week"?17:e.mediaTypeTrailers()==="tv"||e.mediaTypeTrailers()==="Released This Week"?18:-1),s(6),c("options",e.buttonOptionsRecommendations),s(3),F(e.recommendedItems())}}var ge=class n{constructor(t,e){this.tmdbService=t;this.router=e;this.getTrendingItems(),this.onLoadMovieTrailers(),this.getRecommendedItems(this.movieId,this.tvId)}mediaType=a("movies");mediaTypeTrailers=a("movies");mediaTypeRecommended=a("movies");tvTrailers=a([]);movieTrailers=a([]);trendingItems=a([]);recommendedItems=a([]);searchQuery=a("");searchTriggered=a(!1);queryParams=a({});movieId=27205;tvId=1396;get hasQuery(){return!!this.queryParams()?.query?.trim()}performSearch(){let t=this.searchQuery().trim();t&&this.router.navigate(["/search"],{queryParams:{query:t}})}clearSearch(){this.searchQuery.set(""),this.searchTriggered.set(!1)}getTrendingItems(){this.mediaType()==="movies"?this.tmdbService.getTrendingMovies().subscribe(t=>{this.trendingItems.set(t.results)}):this.tmdbService.getTrendingTv().subscribe(t=>{this.trendingItems.set(t.results)})}onToggleChange(t){this.mediaType.set(t==="Movies"?"movies":"tv"),this.getTrendingItems()}getRecommendedItems(t,e){this.mediaTypeRecommended()==="movies"?this.tmdbService.getRecommendedMovies(t).subscribe(o=>{this.recommendedItems.set(o.results)}):this.tmdbService.getRecommendedTvShows(e).subscribe(o=>{this.recommendedItems.set(o.results)})}onToggleChangeRecommended(t){this.mediaTypeRecommended.set(t==="Movies"?"movies":"tv"),this.getRecommendedItems(this.movieId,this.tvId)}onLoadTvTrailers(){this.tvTrailers.set([]),this.tmdbService.getTrendingTv().subscribe(t=>{t.results.slice(0,10).forEach(e=>{this.tmdbService.getTrendingTvVideos(e.id).subscribe(o=>{let p=o.results.find(l=>l.type==="Trailer"&&l.site==="YouTube");p&&this.tvTrailers.update(l=>[...l,{id:`${e.id}-${p.key}`,key:p.key,title:e.name}])})})})}onLoadMovieTrailers(){this.movieTrailers.set([]),this.tmdbService.getTrendingMovies().subscribe(t=>{t.results.slice(0,10).forEach(e=>{this.tmdbService.getTrendingMovieVideos(e.id).subscribe(o=>{let p=o.results.find(l=>l.type==="Trailer"&&l.site==="YouTube");p&&this.movieTrailers.update(l=>[...l,{id:`${e.id}-${p.key}`,key:p.key,title:e.title}])})})})}onLoadThisWeeksTrailers(){this.movieTrailers.set([]),this.tvTrailers.set([]);let t=new Date,e=new Date;e.setDate(t.getDate()-7);let o=e.toISOString().split("T")[0],p=t.toISOString().split("T")[0];this.tmdbService.getReleasedThisWeekMovies(o,p).subscribe(l=>{l.results.forEach(I=>{this.tmdbService.getTrendingMovieVideos(I.id).subscribe(h=>{let S=h.results.find(u=>u.type==="Trailer"&&u.site==="YouTube");S&&this.movieTrailers.update(u=>[...u,{id:`${I.id}-${S.key}`,key:S.key,title:I.title,poster:I.poster_path}])})})}),this.tmdbService.getReleasedThisWeekSeries(o,p).subscribe(l=>{l.results.forEach(I=>{this.tmdbService.getTrendingTvVideos(I.id).subscribe(h=>{let S=h.results.find(u=>u.type==="Trailer"&&u.site==="YouTube");S&&this.tvTrailers.update(u=>[...u,{id:`${I.id}-${S.key}`,key:S.key,title:I.name,poster:I.poster_path}])})})})}onToggleChangeTrailers(t){this.mediaTypeTrailers.set(t==="Movies"?"movies":"tv"),t==="Movies"?this.onLoadMovieTrailers():t==="TV"?this.onLoadTvTrailers():t==="Released This Week"&&this.onLoadThisWeeksTrailers()}buttonOptions=[{btnName:"Movies",isActive:!0},{btnName:"TV",isActive:!1}];buttonOptionsTrailers=[{btnName:"Movies",isActive:!0},{btnName:"TV",isActive:!1},{btnName:"Released This Week",isActive:!1}];buttonOptionsRecommendations=[{btnName:"Movies",isActive:!0},{btnName:"Tv-shows",isActive:!1}];static \u0275fac=function(e){return new(e||n)(v(y),v(R))};static \u0275cmp=C({type:n,selectors:[["app-home-page"]],decls:14,vars:4,consts:[[1,"home-page-container"],[1,"search-wrapper"],[1,"search-box"],["type","text","placeholder","Search for a movie,tv show,person...",1,"form-control","search-input",3,"input","keyup.enter","value"],[1,"btn","btn-primary","search-button",3,"click"],["class","btn btn-outline-secondary clear-button",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-outline-secondary","clear-button",3,"click"],[1,"trending"],[1,"toggle-button"],[3,"optionChanged","options"],[1,"movies-scrollbar-container"],[1,"movies-scrollbar"],[3,"title","posterPath","releaseDate","voteAverage","movieId","mediaType"],[1,"trailers"],[1,"trailers-scrollbar-container"],[1,"trailers-scrollbar"],[1,"recommendation"],[1,"recommended-scrollbar-container"],[1,"recommended-scrollbar"],[3,"trailer"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div")(2,"h2"),d(3,"Endless Stories.One Place."),i(),r(4,"h3"),d(5,"Only for Movie Nerds"),i()(),r(6,"div",1)(7,"div",2)(8,"input",3),g("input",function(l){return o.searchQuery.set(l.target.value)})("keyup.enter",function(){return o.performSearch()}),i(),r(9,"button",4),g("click",function(){return o.performSearch()}),d(10," Search "),i(),b(11,ht,2,0,"button",5),i()(),b(12,vt,1,0,"app-search-results",6)(13,Mt,28,4,"div",6),i()),e&2&&(s(8),c("value",o.searchQuery()),s(3),c("ngIf",o.searchTriggered()),s(),c("ngIf",o.hasQuery),s(),c("ngIf",!o.searchTriggered()))},dependencies:[D,J,pe,N,de,qe,ot],styles:["[_nghost-%COMP%]   .home-page-container[_ngcontent-%COMP%]{max-width:1300px;margin:auto}[_nghost-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#f5f7f7;text-shadow:color(from color srgb r g b);font-style:italic;margin-top:30px}[_nghost-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{max-width:800px;margin:20px auto}[_nghost-%COMP%]   .search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;position:relative;border-radius:50px;flex-wrap:nowrap}[_nghost-%COMP%]   .search-input[_ngcontent-%COMP%]{flex-grow:1;border-radius:50px;padding-left:20px;padding-right:20px;height:50px}[_nghost-%COMP%]   .search-button[_ngcontent-%COMP%]{border-radius:50px;padding:8px 20px;transition:all .3s ease}[_nghost-%COMP%]   .search-button[_ngcontent-%COMP%]:hover{background-color:#0b5ed7}[_nghost-%COMP%]   .trending[_ngcontent-%COMP%]{display:flex;margin-top:50px}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:25px}[_nghost-%COMP%]   .movies-scrollbar-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .movies-scrollbar[_ngcontent-%COMP%]{display:flex;gap:20px;overflow:auto;white-space:nowrap;mask-image:linear-gradient(to right,black 80%,transparent);overflow-y:hidden}[_nghost-%COMP%]   .trailers-scrollbar[_ngcontent-%COMP%]{display:flex;overflow-x:auto;min-height:400px;gap:15px;padding:10px;scroll-behavior:smooth;transition:opacity .2s ease-in-out}[_nghost-%COMP%]   .trailers[_ngcontent-%COMP%], [_nghost-%COMP%]   .recommendation[_ngcontent-%COMP%]{display:flex;margin-top:50px}[_nghost-%COMP%]   .recommended-scrollbar-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .recommended-scrollbar[_ngcontent-%COMP%]{display:flex;gap:20px;overflow:auto;white-space:nowrap;mask-image:linear-gradient(to right,black 80%,transparent);overflow-y:hidden}[_nghost-%COMP%]   .clear-button[_ngcontent-%COMP%]{height:40px;padding:8px 15px}[_nghost-%COMP%]   app-search-results[_ngcontent-%COMP%]{margin-top:30px;display:block;background-color:#111;padding:20px;border-radius:12px}"]})};function yt(n,t){if(n&1){let e=T();r(0,"button",13),g("click",function(){let p=P(e).$implicit,l=f(2);return x(l.onSortSelected(p.value))}),d(1),i()}if(n&2){let e=t.$implicit,o=f(2);A("active",o.sortSelected()===e.value)("just-unselected",e.value===o.UnselectedSort()),s(),B(" ",e==null?null:e.label," ")}}function wt(n,t){if(n&1&&b(0,yt,2,5,"button",12),n&2){let e=f();c("ngForOf",e.sortOptions)}}function Ot(n,t){if(n&1){let e=T();r(0,"button",13),g("click",function(){let p=P(e).$implicit,l=f();return x(l.onGenreSelected(p.id))}),d(1),i()}if(n&2){let e=t.$implicit,o=f();A("active",o.genreSelected().has(e.id)),s(),B(" ",e.name,"")}}function St(n,t){if(n&1){let e=T();r(0,"button",14),g("click",function(){P(e);let p=f();return x(p.onSearch())}),d(1,` Search
`),i()}}var V=class n{constructor(t){this.tmdbService=t}filterTitle="";contentType="movie";sortSelected=a(null);genreSelected=a(new Set);UnselectedSort=a(null);UnselectedGenre=a(null);genreSelectedEvent=new W;searchBtnClicked=new W;resetOption=0;searchTriggered=!1;sortOptions=[];genres=[];ngOnInit(){this.sortOptions=this.contentType==="tv"?[{label:"Popularity Descending",value:"popularity.desc"},{label:"Popularity Ascending",value:"popularity.asc"},{label:"First Air Date Descending",value:"first_air_date.desc"},{label:"First Air Date Ascending",value:"first_air_date.asc"},{label:"Rating Descending",value:"vote_average.desc"},{label:"Rating Ascending",value:"vote_average.asc"}]:[{label:"Popularity Descending",value:"popularity.desc"},{label:"Popularity Ascending",value:"popularity.asc"},{label:"Release Date Descending",value:"primary_release_date.desc"},{label:"Release Date Ascending",value:"primary_release_date.asc"},{label:"Rating Descending",value:"vote_average.desc"},{label:"Rating Ascending",value:"vote_average.asc"}],(this.contentType==="tv"?this.tmdbService.getTvGenres():this.tmdbService.getMovieGenres()).subscribe(e=>{this.genres=e.genres})}onSortSelected(t){this.sortSelected()===t?(this.sortSelected.set(null),this.UnselectedSort.set(t)):(this.sortSelected.set(t),this.UnselectedSort.set(null)),this.searchTriggered=!1}onGenreSelected(t){let e=new Set(this.genreSelected());e.has(t)?e.delete(t):e.add(t),this.genreSelected.set(e),this.searchTriggered=!1}onSearch(){let t=this.sortSelected(),e=Array.from(this.genreSelected());this.searchTriggered=!0,this.searchBtnClicked.emit({sort:t??void 0,genreIds:e.length>0?e:[]})}ngOnChanges(){this.sortSelected.set(null),this.genreSelected.set(new Set)}static \u0275fac=function(e){return new(e||n)(v(y))};static \u0275cmp=C({type:n,selectors:[["app-filters"]],inputs:{filterTitle:"filterTitle",contentType:"contentType",resetOption:"resetOption"},outputs:{genreSelectedEvent:"genreSelectedEvent",searchBtnClicked:"searchBtnClicked"},features:[we],decls:17,vars:3,consts:[[1,"filters-title"],["ngbAccordion",""],["ngbAccordionItem",""],["ngbAccordionHeader",""],["ngbAccordionButton",""],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[1,"mt-4","genre-container"],[1,"genre-title"],[1,"d-flex","flex-wrap","genre-buttons"],["class","btn btn-outline-secondary btn-sm me-1 mb-1",3,"active","click",4,"ngFor","ngForOf"],["class","btn btn-primary w-100 position-fixed bottom-0 start-0 rounded-0 py-3","style","z-index: 1050;",3,"click",4,"ngIf"],["class","btn btn-outline-secondary btn-sm me-1 mb-1",3,"active","just-unselected","click",4,"ngFor","ngForOf"],[1,"btn","btn-outline-secondary","btn-sm","me-1","mb-1",3,"click"],[1,"btn","btn-primary","w-100","position-fixed","bottom-0","start-0","rounded-0","py-3",2,"z-index","1050",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"h2"),d(2),i()(),r(3,"div",1)(4,"div",2)(5,"h2",3)(6,"button",4),d(7,"Sort Results By"),i()(),r(8,"div",5)(9,"div",6),b(10,wt,1,1,"ng-template"),i()()()(),r(11,"div",7)(12,"h5",8),d(13,"Filter By Genre"),i(),r(14,"div",9),b(15,Ot,2,3,"button",10),i()(),b(16,St,2,0,"button",11)),e&2&&(s(2),q(o.filterTitle),s(13),c("ngForOf",o.genres),s(),c("ngIf",(o.sortSelected()||o.genreSelected().size>0)&&!o.searchTriggered))},dependencies:[D,Z,J,Xe,Qe,Je,Ze,Ke,We,Ge],styles:["[_nghost-%COMP%]{max-width:250px;display:block;min-height:100vh;width:100%}[_nghost-%COMP%]   .filters-title[_ngcontent-%COMP%]{display:flex;width:300px;color:#fff;max-height:700px}[_nghost-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]{color:#2a2929;background-color:transparent;transition:background-color .2s ease}[_nghost-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]:not(.active):not(.just-unselected):hover{background-color:#a19f9f}[_nghost-%COMP%]   button.btn-outline-secondary.active[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff}[_nghost-%COMP%]   button.btn-outline-secondary.active[_ngcontent-%COMP%]:hover{background-color:#0d6efd}[_nghost-%COMP%]   .genre-container[_ngcontent-%COMP%]{margin-top:20px;color:#fff}[_nghost-%COMP%]   .genre-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff;margin-bottom:10px}[_nghost-%COMP%]   .genre-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;color:#fff}[_nghost-%COMP%]   .genre-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:15px;padding:6px 10px;color:#fff;border-radius:8px;border:1px solid white;transition:background-color .3s ease}[_nghost-%COMP%]   .genre-buttons[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff;border-color:#0d6efd}"]})};var kt=(n,t)=>t.id;function Ft(n,t){if(n&1&&_(0,"app-movie-card",5),n&2){let e=t.$implicit;c("title",e.title)("posterPath",e.poster_path)("releaseDate",e.release_date)("voteAverage",e.vote_average)("movieId",e.id)("mediaType","movie")}}function It(n,t){if(n&1){let e=T();r(0,"div",3)(1,"div",4),k(2,Ft,1,6,"app-movie-card",5,kt),i(),r(4,"button",6),g("click",function(){P(e);let p=f();return x(p.onLoadNextPages())}),d(5,"Load More"),i()()}if(n&2){let e=f();A("fade-in",!e.loading()),s(2),F(e.popularMovies())}}function Rt(n,t){n&1&&_(0,"app-spinner")}var ue=class n{constructor(t,e){this.tmdbService=t;this.router=e;this.onloadMovies(),this.router.events.pipe(j(o=>o instanceof z)).subscribe(o=>{this.router.url==="/movie"&&(this.sortOptionPicked.set(null),this.genreOptionPicked.set([]),this.currentPage.set(1),this.popularMovies.set([]),this.resetFilters(),this.onloadMovies())})}popularMovies=a([]);currentPage=a(1);totalPages=a(1);sortOptionPicked=a(null);genreOptionPicked=a([]);loading=a(!1);resetFilter=a(0);resetFilters(){this.resetFilter.update(t=>t+1)}onloadMovies(){this.loading.set(!0);let t=this.currentPage(),e=this.sortOptionPicked(),o=this.genreOptionPicked(),l=new Date().getFullYear()+1;(e||o.length>0?this.tmdbService.getSortedPopularMovies(e??"",t,o):this.tmdbService.getMoviesPopular(t)).subscribe({next:h=>{this.totalPages.set(h.total_pages);let S=h.results.filter(u=>{let m=u.release_date?parseInt(u.release_date.substring(0,4)):0,M=e==="release_date.asc"?m>0:m>=1900&&m<=l;return u.poster_path&&u.vote_average>0&&M});this.popularMovies.update(u=>{let m=new Set(u.map(w=>w.id)),M=S.filter(w=>!m.has(w.id));return[...u,...M]}),this.currentPage.set(t)},error:h=>{console.error("Problem in loading Movies",h),this.loading.set(!1)},complete:()=>{this.loading.set(!1)}})}onSearchFromFilters(t){let e=t.sort?.trim()||null,o=t.genreIds??[];this.sortOptionPicked.set(e),this.genreOptionPicked.set(o),this.currentPage.set(1),this.popularMovies.set([]),this.onloadMovies()}onLoadNextPages(){this.currentPage()<this.totalPages()&&(this.currentPage.update(t=>t+1),this.onloadMovies())}static \u0275fac=function(e){return new(e||n)(v(y),v(R))};static \u0275cmp=C({type:n,selectors:[["app-movies-popular"]],features:[ne([y])],decls:4,vars:5,consts:[[1,"movies-container"],[3,"searchBtnClicked","filterTitle","resetOption","contentType"],[1,"movies-grid-and-button",3,"fade-in"],[1,"movies-grid-and-button"],[1,"movies-grid"],[3,"title","posterPath","releaseDate","voteAverage","movieId","mediaType"],[1,"load-more-btn",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"app-filters",1),g("searchBtnClicked",function(l){return o.onSearchFromFilters(l)}),i(),b(2,It,6,2,"div",2),i(),b(3,Rt,1,0,"app-spinner")),e&2&&(s(),c("filterTitle","Popular Movies")("resetOption",o.resetFilter())("contentType","movie"),s(),O(o.popularMovies().length?2:-1),s(),O(o.loading()?3:-1))},dependencies:[D,N,V,$],styles:["[_nghost-%COMP%]{display:block;padding-top:30px}[_nghost-%COMP%]   .movies-container[_ngcontent-%COMP%]{display:flex;margin:auto;justify-content:space-between;box-sizing:border-box;max-width:1250px;padding:0 20px}[_nghost-%COMP%]   .movies-grid-and-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .movies-grid[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:20px;padding-top:60px;min-height:900px;transition:min-height .3s ease}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{margin-top:30px;padding:10px 25px;font-size:20px;border-radius:20px;background-color:#5e6ebe;font-weight:700;cursor:pointer;width:300px;align-self:center}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover{background-color:#707dbf}"]})};var Dt=(n,t)=>t.id;function Et(n,t){if(n&1&&_(0,"app-movie-card",5),n&2){let e=t.$implicit;c("title",e.title)("posterPath",e.poster_path)("releaseDate",e.release_date)("voteAverage",e.vote_average)("movieId",e.id)("mediaType","movie")}}function Nt(n,t){if(n&1){let e=T();r(0,"div",3)(1,"div",4),k(2,Et,1,6,"app-movie-card",5,Dt),i(),r(4,"button",6),g("click",function(){P(e);let p=f();return x(p.onLoadNextPages())}),d(5,"Load More"),i()()}if(n&2){let e=f();A("fade-in",!e.loading()),s(2),F(e.nowPlayingMovies())}}function At(n,t){n&1&&_(0,"app-spinner")}var fe=class n{constructor(t,e){this.tmdbService=t;this.router=e;this.onLoadMovies(),this.router.events.pipe(j(o=>o instanceof z)).subscribe(o=>{this.router.url==="/movie/now-playing"&&(this.sortOptionPicked.set(null),this.genreOptionPicked.set([]),this.currentPage.set(1),this.nowPlayingMovies.set([]),this.resetFilters(),this.onLoadMovies())})}nowPlayingMovies=a([]);currentPage=a(1);totalPages=a(1);sortOptionPicked=a(null);genreOptionPicked=a([]);loading=a(!1);resetFilter=a(0);resetFilters(){this.resetFilter.update(t=>t+1)}onLoadMovies(){this.loading.set(!0);let t=this.currentPage(),e=this.sortOptionPicked(),o=this.genreOptionPicked(),l=new Date().getFullYear()+1;(e||o.length>0?this.tmdbService.getSortedNowPlayingMovies(e??"",t,o):this.tmdbService.getNowPlayingMovies(t)).subscribe({next:h=>{this.totalPages.set(h.total_pages);let S=h.results.filter(u=>{let m=u.release_date?parseInt(u.release_date.substring(0,4)):0,M=e==="release_date.asc"?m>0:m>=2025&&m<=l;return u.poster_path&&u.vote_average>0&&M});this.nowPlayingMovies.update(u=>{let m=new Set(u.map(w=>w.id)),M=S.filter(w=>!m.has(w.id));return[...u,...M]}),this.currentPage.set(t)},error:h=>{console.error("Problem in loading Movies",h),this.loading.set(!1)},complete:()=>{this.loading.set(!1)}})}onSearchFromFilters(t){let e=t.sort?.trim()||null,o=t.genreIds??[];this.sortOptionPicked.set(e),this.genreOptionPicked.set(o),this.currentPage.set(1),this.nowPlayingMovies.set([]),this.onLoadMovies()}onLoadNextPages(){this.currentPage()<this.totalPages()&&(this.currentPage.update(t=>t+1),this.onLoadMovies())}static \u0275fac=function(e){return new(e||n)(v(y),v(R))};static \u0275cmp=C({type:n,selectors:[["app-movies-now-playing"]],features:[ne([y])],decls:4,vars:5,consts:[[1,"movies-container"],[3,"searchBtnClicked","filterTitle","resetOption","contentType"],[1,"movies-grid-and-button",3,"fade-in"],[1,"movies-grid-and-button"],[1,"movies-grid"],[3,"title","posterPath","releaseDate","voteAverage","movieId","mediaType"],[1,"load-more-btn",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"app-filters",1),g("searchBtnClicked",function(l){return o.onSearchFromFilters(l)}),i(),b(2,Nt,6,2,"div",2),i(),b(3,At,1,0,"app-spinner")),e&2&&(s(),c("filterTitle","Now Playing")("resetOption",o.resetFilter())("contentType","movie"),s(),O(o.nowPlayingMovies().length?2:-1),s(),O(o.loading()?3:-1))},dependencies:[D,V,N,$],styles:["[_nghost-%COMP%]{display:block;padding-top:30px}[_nghost-%COMP%]   .movies-container[_ngcontent-%COMP%]{display:flex;margin:auto;justify-content:space-between;box-sizing:border-box;max-width:1250px;padding:0 20px}[_nghost-%COMP%]   .movies-grid-and-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .movies-grid[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:20px;padding-top:60px}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{margin-top:30px;padding:10px 25px;font-size:20px;border-radius:20px;background-color:#5e6ebe;font-weight:700;cursor:pointer;width:300px;align-self:center}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover{background-color:#707dbf}"]})};var Lt=(n,t)=>t.id;function Vt(n,t){if(n&1&&_(0,"app-movie-card",5),n&2){let e=t.$implicit;c("title",e.title)("posterPath",e.poster_path)("releaseDate",e.release_date)("voteAverage",e.vote_average)("movieId",e.id)("mediaType","movie")}}function jt(n,t){if(n&1){let e=T();r(0,"div",3)(1,"div",4),k(2,Vt,1,6,"app-movie-card",5,Lt),i(),r(4,"button",6),g("click",function(){P(e);let p=f();return x(p.onLoadNextPages())}),d(5,"Load More"),i()()}if(n&2){let e=f();A("fade-in",!e.loading()),s(2),F(e.upcomingMovies())}}function Bt(n,t){n&1&&_(0,"app-spinner")}var he=class n{constructor(t,e){this.tmdbService=t;this.router=e;this.onLoadMovies(),this.router.events.pipe(j(o=>o instanceof z)).subscribe(o=>{this.router.url==="/movie/upcoming"&&(this.sortOptionPicked.set(null),this.genreOptionPicked.set([]),this.currentPage.set(1),this.upcomingMovies.set([]),this.resetFilters(),this.onLoadMovies())})}upcomingMovies=a([]);currentPage=a(1);totalPages=a(1);sortOptionPicked=a(null);genreOptionPicked=a([]);loading=a(!1);resetFilter=a(0);resetFilters(){this.resetFilter.update(t=>t+1)}onLoadMovies(){this.loading.set(!0);let t=this.currentPage(),e=this.sortOptionPicked(),o=this.genreOptionPicked();(e||o.length>0?this.tmdbService.getSortedUpcomingMovies(e??"",t,o):this.tmdbService.getUpcomingMovies(t)).subscribe({next:l=>{this.totalPages.set(l.total_pages);let I=l.results.filter(h=>!!h.poster_path&&!!h.release_date);this.upcomingMovies.update(h=>{let S=new Set(h.map(m=>m.id)),u=I.filter(m=>!S.has(m.id));return[...h,...u]}),this.currentPage.set(t)},error:l=>{console.error("Problem loading upcoming movies",l),this.loading.set(!1)},complete:()=>{this.loading.set(!1)}})}onSearchFromFilters(t){let e=t.sort?.trim()||null,o=t.genreIds??[];this.sortOptionPicked.set(e),this.genreOptionPicked.set(o),this.currentPage.set(1),this.upcomingMovies.set([]),this.onLoadMovies()}onLoadNextPages(){this.currentPage()<this.totalPages()&&(this.currentPage.update(t=>t+1),this.onLoadMovies())}static \u0275fac=function(e){return new(e||n)(v(y),v(R))};static \u0275cmp=C({type:n,selectors:[["app-movies-upcoming"]],decls:4,vars:5,consts:[[1,"movies-container"],[3,"searchBtnClicked","filterTitle","resetOption","contentType"],[1,"movies-grid-and-button",3,"fade-in"],[1,"movies-grid-and-button"],[1,"movies-grid"],[3,"title","posterPath","releaseDate","voteAverage","movieId","mediaType"],[1,"load-more-btn",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"app-filters",1),g("searchBtnClicked",function(l){return o.onSearchFromFilters(l)}),i(),b(2,jt,6,2,"div",2),i(),b(3,Bt,1,0,"app-spinner")),e&2&&(s(),c("filterTitle","Upcoming")("resetOption",o.resetFilter())("contentType","movie"),s(),O(o.upcomingMovies().length?2:-1),s(),O(o.loading()?3:-1))},dependencies:[V,N,$],styles:["[_nghost-%COMP%]{display:block;padding-top:30px}[_nghost-%COMP%]   .movies-container[_ngcontent-%COMP%]{display:flex;margin:auto;justify-content:space-between;box-sizing:border-box;max-width:1250px;padding:0 20px}[_nghost-%COMP%]   .movies-grid-and-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .movies-grid[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:20px;padding-top:60px}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{margin-top:30px;padding:10px 25px;font-size:20px;border-radius:20px;background-color:#5e6ebe;font-weight:700;cursor:pointer;width:300px;align-self:center}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover{background-color:#707dbf}"]})};var zt=(n,t)=>t.id;function $t(n,t){if(n&1&&_(0,"app-movie-card",5),n&2){let e=t.$implicit;c("title",e.title)("posterPath",e.poster_path)("releaseDate",e.release_date)("voteAverage",e.vote_average)("movieId",e.id)("mediaType","movie")}}function Ut(n,t){if(n&1){let e=T();r(0,"div",3)(1,"div",4),k(2,$t,1,6,"app-movie-card",5,zt),i(),r(4,"button",6),g("click",function(){P(e);let p=f();return x(p.onLoadNextPages())}),d(5,"Load More"),i()()}if(n&2){let e=f();A("fade-in",!e.loading()),s(2),F(e.topRatedMovies())}}function Ht(n,t){n&1&&_(0,"app-spinner")}var ve=class n{constructor(t,e){this.tmdbService=t;this.router=e;this.onLoadMovies(),this.router.events.pipe(j(o=>o instanceof z)).subscribe(o=>{this.router.url==="/movie/top-rated"&&(this.sortOptionPicked.set(null),this.genreOptionPicked.set([]),this.currentPage.set(1),this.topRatedMovies.set([]),this.resetFilters(),this.onLoadMovies())})}topRatedMovies=a([]);currentPage=a(1);totalPages=a(1);sortOptionPicked=a(null);genreOptionPicked=a([]);loading=a(!1);resetFilter=a(0);resetFilters(){this.resetFilter.update(t=>t+1)}onLoadMovies(){this.loading.set(!0);let t=this.currentPage(),e=this.sortOptionPicked(),o=this.genreOptionPicked(),l=new Date().getFullYear()+1;(e||o.length>0?this.tmdbService.getSortedTopRatedMovie(e??"",t,o):this.tmdbService.getTopRatedMovies(t)).subscribe({next:h=>{this.totalPages.set(h.total_pages);let S=h.results.filter(u=>{let m=u.release_date?parseInt(u.release_date.substring(0,4)):0,M=e==="release_date.asc"?m>0:m>=1920&&m<=l;return u.poster_path&&u.vote_average>0&&M});this.topRatedMovies.update(u=>{let m=new Set(u.map(w=>w.id)),M=S.filter(w=>!m.has(w.id));return[...u,...M]}),this.currentPage.set(t)},error:h=>{console.error("Problem in loading Movies",h),this.loading.set(!1)},complete:()=>{this.loading.set(!1)}})}onSearchFromFilters(t){let e=t.sort?.trim()||null,o=t.genreIds??[];this.sortOptionPicked.set(e),this.genreOptionPicked.set(o),this.currentPage.set(1),this.topRatedMovies.set([]),this.onLoadMovies()}onLoadNextPages(){this.currentPage()<this.totalPages()&&(this.currentPage.update(t=>t+1),this.onLoadMovies())}static \u0275fac=function(e){return new(e||n)(v(y),v(R))};static \u0275cmp=C({type:n,selectors:[["app-movies-top-rated"]],decls:4,vars:5,consts:[[1,"movies-container"],[3,"searchBtnClicked","filterTitle","resetOption","contentType"],[1,"movies-grid-and-button",3,"fade-in"],[1,"movies-grid-and-button"],[1,"movies-grid"],[3,"title","posterPath","releaseDate","voteAverage","movieId","mediaType"],[1,"load-more-btn",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"app-filters",1),g("searchBtnClicked",function(l){return o.onSearchFromFilters(l)}),i(),b(2,Ut,6,2,"div",2),i(),b(3,Ht,1,0,"app-spinner")),e&2&&(s(),c("filterTitle","Top Rated")("resetOption",o.resetFilter())("contentType","movie"),s(),O(o.topRatedMovies().length?2:-1),s(),O(o.loading()?3:-1))},dependencies:[V,N,$],styles:["[_nghost-%COMP%]{display:block;padding-top:30px}[_nghost-%COMP%]   .movies-container[_ngcontent-%COMP%]{display:flex;margin:auto;justify-content:space-between;box-sizing:border-box;max-width:1250px;padding:0 20px}[_nghost-%COMP%]   .movies-grid-and-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .movies-grid[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:20px;padding-top:60px}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{margin-top:30px;padding:10px 25px;font-size:20px;border-radius:20px;background-color:#5e6ebe;font-weight:700;cursor:pointer;width:300px;align-self:center}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover{background-color:#707dbf}"]})};var Yt=(n,t)=>t.id;function qt(n,t){if(n&1&&_(0,"app-movie-card",5),n&2){let e=t.$implicit;c("title",e.original_name)("posterPath",e.poster_path)("releaseDate",e.first_air_date)("voteAverage",e.vote_average)("movieId",e.id)("mediaType","tv")}}function Wt(n,t){if(n&1){let e=T();r(0,"div",3)(1,"div",4),k(2,qt,1,6,"app-movie-card",5,Yt),i(),r(4,"button",6),g("click",function(){P(e);let p=f();return x(p.onLoadNextPages())}),d(5,"Load More"),i()()}if(n&2){let e=f();A("fade-in",!e.loading()),s(2),F(e.popularTvShows())}}function Gt(n,t){n&1&&_(0,"app-spinner")}var _e=class n{constructor(t,e){this.tmdbService=t;this.router=e;this.onLoadSeries(),this.router.events.pipe(j(o=>o instanceof z)).subscribe(o=>{this.router.url==="/tv"&&(this.sortOptionPicked.set(null),this.genreOptionPicked.set([]),this.currentPage.set(1),this.popularTvShows.set([]),this.resetFilters(),this.onLoadSeries())})}popularTvShows=a([]);currentPage=a(1);totalPages=a(1);sortOptionPicked=a(null);genreOptionPicked=a([]);loading=a(!1);resetFilter=a(0);resetFilters(){this.resetFilter.update(t=>t+1)}onLoadSeries(){this.loading.set(!0);let t=this.currentPage(),e=this.sortOptionPicked(),o=this.genreOptionPicked(),l=new Date().getFullYear()+1;(e||o.length>0?this.tmdbService.getSortedPopularTvShows(e??"",t,o):this.tmdbService.getPopularTvShows(t)).subscribe({next:h=>{this.totalPages.set(h.total_pages);let S=h.results.filter(u=>{let m=u.first_air_date?parseInt(u.first_air_date.substring(0,4)):0,M=e==="first_air_date.asc"?m>0:m>=1920&&m<=l;return!!u.poster_path&&u.vote_average>0&&M});e==="first_air_date.asc"?S.sort((u,m)=>u.first_air_date.localeCompare(m.first_air_date??"")??0):e==="first_air_date.desc"&&S.sort((u,m)=>m.first_air_date.localeCompare(u.first_air_date??"")??0),t===1?this.popularTvShows.set(S):this.popularTvShows.update(u=>{let m=new Set(u.map(w=>w.id)),M=S.filter(w=>!m.has(w.id));return[...u,...M]}),this.currentPage.set(t)},error:h=>{console.error("Problem in loading Tv Shows",h),this.loading.set(!1)},complete:()=>{this.loading.set(!1)}})}onSearchFromFilters(t){let e=t.sort?.trim()||null,o=t.genreIds??[];this.sortOptionPicked.set(e),this.genreOptionPicked.set(o),this.currentPage.set(1),this.popularTvShows.set([]),this.onLoadSeries()}onLoadNextPages(){this.currentPage()<this.totalPages()&&(this.currentPage.update(t=>t+1),this.onLoadSeries())}static \u0275fac=function(e){return new(e||n)(v(y),v(R))};static \u0275cmp=C({type:n,selectors:[["app-tv-shows-popular"]],decls:4,vars:5,consts:[[1,"series-container"],[3,"searchBtnClicked","filterTitle","resetOption","contentType"],[1,"series-grid-and-button",3,"fade-in"],[1,"series-grid-and-button"],[1,"series-grid"],[3,"title","posterPath","releaseDate","voteAverage","movieId","mediaType"],[1,"load-more-btn",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"app-filters",1),g("searchBtnClicked",function(l){return o.onSearchFromFilters(l)}),i(),b(2,Wt,6,2,"div",2),i(),b(3,Gt,1,0,"app-spinner")),e&2&&(s(),c("filterTitle","Popular")("resetOption",o.resetFilter())("contentType","tv"),s(),O(o.popularTvShows().length?2:-1),s(),O(o.loading()?3:-1))},dependencies:[N,V,$],styles:["[_nghost-%COMP%]{display:block;padding-top:30px}[_nghost-%COMP%]   .series-container[_ngcontent-%COMP%]{display:flex;margin:auto;justify-content:space-between;box-sizing:border-box;max-width:1250px;padding:0 20px}[_nghost-%COMP%]   .series-grid-and-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .series-grid[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:20px;padding-top:60px}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{margin-top:30px;padding:10px 25px;font-size:20px;border-radius:20px;background-color:#5e6ebe;font-weight:700;cursor:pointer;width:300px;align-self:center}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover{background-color:#707dbf}"]})};var Qt=(n,t)=>t.id;function Kt(n,t){if(n&1&&_(0,"app-movie-card",5),n&2){let e=t.$implicit;c("title",e.original_name)("posterPath",e.poster_path)("releaseDate",e.first_air_date)("voteAverage",e.vote_average)("movieId",e.id)("mediaType","tv")}}function Zt(n,t){if(n&1){let e=T();r(0,"div",3)(1,"div",4),k(2,Kt,1,6,"app-movie-card",5,Qt),i(),r(4,"button",6),g("click",function(){P(e);let p=f();return x(p.onLoadNextPages())}),d(5,"Load More"),i()()}if(n&2){let e=f();A("fade-in",!e.loading()),s(2),F(e.airingTodayTvShows())}}function Jt(n,t){n&1&&_(0,"app-spinner")}var Ce=class n{constructor(t,e){this.tmdbService=t;this.router=e;this.onLoadSeries(),this.router.events.pipe(j(o=>o instanceof z)).subscribe(o=>{this.router.url==="/tv/airing-today"&&(this.sortOptionPicked.set(null),this.genreOptionPicked.set([]),this.currentPage.set(1),this.airingTodayTvShows.set([]),this.resetFilters(),this.onLoadSeries())})}airingTodayTvShows=a([]);currentPage=a(1);totalPages=a(1);sortOptionPicked=a(null);genreOptionPicked=a([]);loading=a(!1);resetFilter=a(0);resetFilters(){this.resetFilter.update(t=>t+1)}onLoadSeries(t=20){this.loading.set(!0);let e=this.currentPage(),o=this.sortOptionPicked(),p=this.genreOptionPicked();e===1&&this.airingTodayTvShows.set([]);let l=()=>{(o||p.length>0?this.tmdbService.getSortedAiringTodayTvShows(o??"",e,p):this.tmdbService.getAiringTodayTvShows(e)).subscribe({next:h=>{this.totalPages.set(h.total_pages);let S=h.results.filter(m=>{let M=m.first_air_date?parseInt(m.first_air_date.substring(0,4)):0,w=M>=2024&&M<=2026;return!!m.poster_path&&m.vote_average>0&&w});this.airingTodayTvShows.update(m=>{let M=new Set(m.map(U=>U.id)),w=S.filter(U=>!M.has(U.id));return[...m,...w]}),this.airingTodayTvShows().length<t&&e<h.total_pages?(e++,this.currentPage.set(e),l()):(this.currentPage.set(e),this.loading.set(!1))},error:h=>{console.error("Failed to load TV Shows:",h),this.loading.set(!1)}})};l()}onSearchFromFilters(t){let e=t.sort?.trim()||null,o=t.genreIds??[];this.sortOptionPicked.set(e),this.genreOptionPicked.set(o),this.currentPage.set(1),this.airingTodayTvShows.set([]),this.onLoadSeries()}onLoadNextPages(){if(this.currentPage()<this.totalPages()){let t=this.airingTodayTvShows().length;this.onLoadSeries(t+20)}}static \u0275fac=function(e){return new(e||n)(v(y),v(R))};static \u0275cmp=C({type:n,selectors:[["app-tv-shows-airing-today"]],decls:4,vars:5,consts:[[1,"series-container"],[3,"searchBtnClicked","filterTitle","resetOption","contentType"],[1,"series-grid-and-button",3,"fade-in"],[1,"series-grid-and-button"],[1,"series-grid"],[3,"title","posterPath","releaseDate","voteAverage","movieId","mediaType"],[1,"load-more-btn",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"app-filters",1),g("searchBtnClicked",function(l){return o.onSearchFromFilters(l)}),i(),b(2,Zt,6,2,"div",2),i(),b(3,Jt,1,0,"app-spinner")),e&2&&(s(),c("filterTitle","Airing Today")("resetOption",o.resetFilter())("contentType","tv"),s(),O(o.airingTodayTvShows().length?2:-1),s(),O(o.loading()?3:-1))},dependencies:[N,V,$],styles:["[_nghost-%COMP%]{display:block;padding-top:30px}[_nghost-%COMP%]   .series-container[_ngcontent-%COMP%]{display:flex;margin:auto;justify-content:space-between;box-sizing:border-box;max-width:1250px;padding:0 20px}[_nghost-%COMP%]   .series-grid-and-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .series-grid[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:20px;padding-top:60px}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{margin-top:30px;padding:10px 25px;font-size:20px;border-radius:20px;background-color:#5e6ebe;font-weight:700;cursor:pointer;width:300px;align-self:center}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover{background-color:#707dbf}"]})};var Xt=(n,t)=>t.id;function en(n,t){if(n&1&&_(0,"app-movie-card",5),n&2){let e=t.$implicit;c("title",e.original_name)("posterPath",e.poster_path)("releaseDate",e.first_air_date)("voteAverage",e.vote_average)("movieId",e.id)("mediaType","tv")}}function tn(n,t){if(n&1){let e=T();r(0,"div",3)(1,"div",4),k(2,en,1,6,"app-movie-card",5,Xt),i(),r(4,"button",6),g("click",function(){P(e);let p=f();return x(p.onLoadNextPages())}),d(5,"Load More"),i()()}if(n&2){let e=f();A("fade-in",!e.loading()),s(2),F(e.showsOnTv())}}function nn(n,t){n&1&&_(0,"app-spinner")}var be=class n{constructor(t,e){this.tmdbService=t;this.router=e;this.onLoadSeries(),this.router.events.pipe(j(o=>o instanceof z)).subscribe(o=>{this.router.url==="/tv/on-tv"&&(this.sortOptionPicked.set(null),this.genreOptionPicked.set([]),this.currentPage.set(1),this.showsOnTv.set([]),this.resetFilters(),this.onLoadSeries())})}showsOnTv=a([]);currentPage=a(1);totalPages=a(1);sortOptionPicked=a(null);genreOptionPicked=a([]);loading=a(!1);resetFilter=a(0);resetFilters(){this.resetFilter.update(t=>t+1)}onLoadSeries(t=20){this.loading.set(!0);let e=this.currentPage(),o=this.sortOptionPicked(),p=this.genreOptionPicked();e===1&&this.showsOnTv.set([]);let l=()=>{(o||p.length>0?this.tmdbService.getSortedOnTvShows(o??"",e,p):this.tmdbService.getTvShowsOnTv(e)).subscribe({next:h=>{this.totalPages.set(h.total_pages);let S=h.results.filter(m=>{let M=m.first_air_date?parseInt(m.first_air_date.substring(0,4)):0,w=M>=2024&&M<=2026;return!!m.poster_path&&m.vote_average>0&&w});this.showsOnTv.update(m=>{let M=new Set(m.map(U=>U.id)),w=S.filter(U=>!M.has(U.id));return[...m,...w]}),this.showsOnTv().length<t&&e<h.total_pages?(e++,this.currentPage.set(e),l()):(this.currentPage.set(e),this.loading.set(!1))},error:h=>{console.error("Failed to load On TV Shows:",h),this.loading.set(!1)}})};l()}onSearchFromFilters(t){let e=t.sort?.trim()||null,o=t.genreIds??[];this.sortOptionPicked.set(e),this.genreOptionPicked.set(o),this.currentPage.set(1),this.showsOnTv.set([]),this.onLoadSeries()}onLoadNextPages(){if(this.currentPage()<this.totalPages()){let t=this.showsOnTv().length;this.onLoadSeries(t+20)}}static \u0275fac=function(e){return new(e||n)(v(y),v(R))};static \u0275cmp=C({type:n,selectors:[["app-tv-shows-on-tv"]],decls:4,vars:5,consts:[[1,"series-container"],[3,"searchBtnClicked","filterTitle","resetOption","contentType"],[1,"series-grid-and-button",3,"fade-in"],[1,"series-grid-and-button"],[1,"series-grid"],[3,"title","posterPath","releaseDate","voteAverage","movieId","mediaType"],[1,"load-more-btn",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"app-filters",1),g("searchBtnClicked",function(l){return o.onSearchFromFilters(l)}),i(),b(2,tn,6,2,"div",2),i(),b(3,nn,1,0,"app-spinner")),e&2&&(s(),c("filterTitle","On Tv")("resetOption",o.resetFilter())("contentType","tv"),s(),O(o.showsOnTv().length?2:-1),s(),O(o.loading()?3:-1))},dependencies:[V,N,$],styles:["[_nghost-%COMP%]{display:block;padding-top:30px}[_nghost-%COMP%]   .series-container[_ngcontent-%COMP%]{display:flex;margin:auto;justify-content:space-between;box-sizing:border-box;max-width:1250px;padding:0 20px}[_nghost-%COMP%]   .series-grid-and-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .series-grid[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:20px;padding-top:60px}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{margin-top:30px;padding:10px 25px;font-size:20px;border-radius:20px;background-color:#5e6ebe;font-weight:700;cursor:pointer;width:300px;align-self:center}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover{background-color:#707dbf}"]})};var on=(n,t)=>t.id;function rn(n,t){if(n&1&&_(0,"app-movie-card",5),n&2){let e=t.$implicit;c("title",e.original_name)("posterPath",e.poster_path)("releaseDate",e.first_air_date)("voteAverage",e.vote_average)("movieId",e.id)("mediaType","tv")}}function sn(n,t){if(n&1){let e=T();r(0,"div",3)(1,"div",4),k(2,rn,1,6,"app-movie-card",5,on),i(),r(4,"button",6),g("click",function(){P(e);let p=f();return x(p.onLoadNextPages())}),d(5,"Load More"),i()()}if(n&2){let e=f();A("fade-in",!e.loading()),s(2),F(e.topRatedTvShows())}}var Pe=class n{constructor(t,e){this.tmdbService=t;this.router=e;this.onLoadTvSeries(),this.router.events.pipe(j(o=>o instanceof z)).subscribe(()=>{this.router.url==="/tv/top-rated"&&(this.sortOptionPicked.set(null),this.genreOptionPicked.set([]),this.currentPage.set(1),this.topRatedTvShows.set([]),this.resetFilters(),this.onLoadTvSeries())})}topRatedTvShows=a([]);currentPage=a(1);totalPages=a(1);sortOptionPicked=a(null);genreOptionPicked=a([]);loading=a(!1);resetFilter=a(0);resetFilters(){this.resetFilter.update(t=>t+1)}onLoadTvSeries(t=20){this.loading.set(!0);let e=this.currentPage(),o=this.sortOptionPicked(),p=this.genreOptionPicked();e===1&&this.topRatedTvShows.set([]);let l=()=>{(o||p.length>0?this.tmdbService.getSortedTopRatedTvShows(o??"",e,p):this.tmdbService.getTvShowsTopRated(e)).subscribe({next:h=>{this.totalPages.set(h.total_pages);let S=h.results.filter(m=>{let M=m.first_air_date?parseInt(m.first_air_date.substring(0,4)):0,w=M>=1930&&M<=new Date().getFullYear()+1;return!!m.poster_path&&m.vote_average>0&&w});this.topRatedTvShows.update(m=>{let M=new Set(m.map(U=>U.id)),w=S.filter(U=>!M.has(U.id));return[...m,...w]}),this.topRatedTvShows().length<t&&e<h.total_pages?(e++,this.currentPage.set(e),l()):(this.currentPage.set(e),this.loading.set(!1))},error:h=>{console.error("Failed to load Top Rated TV Shows:",h),this.loading.set(!1)}})};l()}onSearchFromFilters(t){let e=t.sort?.trim()||null,o=t.genreIds??[];this.sortOptionPicked.set(e),this.genreOptionPicked.set(o),this.currentPage.set(1),this.topRatedTvShows.set([]),this.onLoadTvSeries()}onLoadNextPages(){if(this.currentPage()<this.totalPages()){let t=this.topRatedTvShows().length;this.onLoadTvSeries(t+20)}}static \u0275fac=function(e){return new(e||n)(v(y),v(R))};static \u0275cmp=C({type:n,selectors:[["app-tv-shows-top-rated"]],decls:3,vars:4,consts:[[1,"series-container"],[3,"searchBtnClicked","filterTitle","resetOption","contentType"],[1,"series-grid-and-button",3,"fade-in"],[1,"series-grid-and-button"],[1,"series-grid"],[3,"title","posterPath","releaseDate","voteAverage","movieId","mediaType"],[1,"load-more-btn",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"app-filters",1),g("searchBtnClicked",function(l){return o.onSearchFromFilters(l)}),i(),b(2,sn,6,2,"div",2),i()),e&2&&(s(),c("filterTitle","Top Rated")("resetOption",o.resetFilter())("contentType","tv"),s(),O(o.topRatedTvShows().length?2:-1))},dependencies:[V,N],styles:["[_nghost-%COMP%]{display:block;padding-top:30px}[_nghost-%COMP%]   .series-container[_ngcontent-%COMP%]{display:flex;margin:auto;justify-content:space-between;box-sizing:border-box;max-width:1250px;padding:0 20px}[_nghost-%COMP%]   .series-grid-and-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .series-grid[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:20px;padding-top:60px}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{margin-top:30px;padding:10px 25px;font-size:20px;border-radius:20px;background-color:#5e6ebe;font-weight:700;cursor:pointer;width:300px;align-self:center}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover{background-color:#707dbf}"]})};var an=(n,t)=>t.title||t.name;function pn(n,t){if(n&1&&(r(0,"div",3)(1,"li"),d(2),i()()),n&2){let e=t.$implicit;s(2),q(e.title||e.name)}}var xe=class n{constructor(t){this.router=t}person;goToPersonDetails(t){this.router.navigate(["/person",this.person.id])}get mostKnownFor(){return this.person.known_for.sort((t,e)=>e.popularity-t.popularity).slice(0,3)}static \u0275fac=function(e){return new(e||n)(v(R))};static \u0275cmp=C({type:n,selectors:[["app-people-card"]],inputs:{person:"person"},decls:7,vars:3,consts:[[1,"card-wrapper"],[1,"profile",3,"click","src","alt"],[1,"person-details"],[1,"work-name"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"img",1),g("click",function(){return o.goToPersonDetails(o.person.id)}),i(),r(2,"div",2)(3,"h3"),d(4),i(),k(5,pn,3,1,"div",3,an),i()()),e&2&&(s(),Q("alt",o.person.name),c("src","https://image.tmdb.org/t/p/w185"+o.person.profile_path,G),s(3),q(o.person.name),s(),F(o.mostKnownFor))},styles:["[_nghost-%COMP%]   .card-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:280px;max-width:280px;height:500px;align-items:center;background-color:#fff;box-shadow:0 8px 12px #0000001a;padding:15px}[_nghost-%COMP%]   .profile[_ngcontent-%COMP%]{width:100%;height:330px;object-fit:cover;border-radius:10px}[_nghost-%COMP%]   .profile[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .person-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;margin-top:5px}[_nghost-%COMP%]   .person-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:4px 0;font-size:18px;font-weight:600;color:#333}[_nghost-%COMP%]   .work-name[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-top:5px;width:100%}[_nghost-%COMP%]   li[_ngcontent-%COMP%]{text-indent:-20px;padding-left:16px}"]})};var ln=(n,t)=>t.id;function cn(n,t){if(n&1&&_(0,"app-people-card",2),n&2){let e=t.$implicit;c("person",e)}}function dn(n,t){n&1&&_(0,"app-spinner")}var Te=class n{constructor(t){this.tmdbService=t;this.onLoadPopularPeople()}popularPeople=a([]);currentPage=a(1);totalPages=a(1);loading=a(!0);onLoadPopularPeople(){this.loading.set(!0),this.tmdbService.getPopularPeople(this.currentPage()).subscribe(t=>{this.popularPeople.update(e=>[...e,...t.results]),this.totalPages.set(t.total_pages),this.loading.set(!1)})}onLoadNextPages(){this.currentPage()<this.totalPages()&&this.currentPage.update(t=>t+1),this.onLoadPopularPeople()}static \u0275fac=function(e){return new(e||n)(v(y))};static \u0275cmp=C({type:n,selectors:[["app-popular-people"]],decls:10,vars:1,consts:[[1,"page-background"],[1,"people-container"],[3,"person"],[1,"btn-container"],[1,"load-more-btn",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"h3"),d(2,"Popular People"),i(),r(3,"div",1),k(4,cn,1,1,"app-people-card",2,ln),i(),r(6,"div",3)(7,"button",4),g("click",function(){return o.onLoadNextPages()}),d(8,"Load More"),i()()(),b(9,dn,1,0,"app-spinner")),e&2&&(s(4),F(o.popularPeople()),s(5),O(o.loading()?9:-1))},dependencies:[D,xe,$],styles:["[_nghost-%COMP%]   .people-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:25px;padding:25px;justify-content:center}[_nghost-%COMP%]   .page-background[_ngcontent-%COMP%]{background-color:#f5f5f5;min-height:100vh;padding:32px 0}[_nghost-%COMP%]   h3[_ngcontent-%COMP%]{margin:auto;max-width:fit-content}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{margin-top:30px;padding:10px 25px;font-size:20px;border-radius:20px;background-color:#5e6ebe;font-weight:700;cursor:pointer;width:300px}[_nghost-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover{background-color:#707dbf}[_nghost-%COMP%]   .btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})};var rt=[{path:"",component:ge},{path:"movie",component:ue,runGuardsAndResolvers:"always"},{path:"movie/now-playing",component:fe,runGuardsAndResolvers:"always"},{path:"movie/upcoming",component:he},{path:"movie/top-rated",component:ve},{path:"tv",component:_e},{path:"tv/airing-today",component:Ce},{path:"tv/on-tv",component:be},{path:"tv/top-rated",component:Pe},{path:"people",component:Te},{path:"person/:id",loadComponent:()=>import("./chunk-PEN2WH5F.js").then(n=>n.PersonDetailsComponent)},{path:"movie/:id",loadComponent:()=>import("./chunk-RCUUVXSD.js").then(n=>n.MovieDetailsComponent)},{path:"tv/:id",loadComponent:()=>import("./chunk-RCUUVXSD.js").then(n=>n.MovieDetailsComponent)},{path:"search",loadComponent:()=>import("./chunk-5L2YFMKP.js").then(n=>n.SearchResultsComponent)},{path:"auth/done",loadComponent:()=>import("./chunk-NXYHFGVE.js").then(n=>n.AuthDoneComponent)},{path:"u/:username/:type",loadComponent:()=>import("./chunk-DW5M3PGO.js").then(n=>n.UserListComponent)}];var st={providers:[Ne({eventCoalescing:!0}),Ue(rt,He({onSameUrlNavigation:"reload"})),Be(),y]};je(ae,st).catch(n=>console.error(n));
