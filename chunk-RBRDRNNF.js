import{a as j}from"./chunk-2WL43MMA.js";import{$ as _,Aa as P,Ba as f,E as k,F as I,L as h,N as M,P as a,R as D,Sa as N,T as F,Ta as B,Xa as z,Y as v,Ya as G,a as S,b as E,ba as T,bb as $,ha as i,ia as n,ib as L,ja as O,na as A,pa as w,qa as C,za as r}from"./chunk-CCENH2DD.js";function V(s,o){if(s&1&&(i(0,"p")(1,"strong"),r(2,"Died: "),n(),r(3),n()),s&2){let e,t=C();a(3),f("",t.formatDate((e=t.person())==null?null:e.deathday,(e=t.person())==null?null:e.deathday)," ")}}function K(s,o){if(s&1){let e=A();i(0,"button",20),w("click",function(){k(e);let d=C();return I(d.toggleBiography())}),r(1),n()}if(s&2){let e=C();a(),f(" ",e.showFullBio()?"Show Less":"Read More"," ")}}function U(s,o){if(s&1&&(i(0,"div",21),O(1,"img",22),i(2,"p"),r(3),n()()),s&2){let e=o.$implicit;a(),_("src","https://image.tmdb.org/t/p/w185"+e.poster_path,M)("alt",e.title||e.name),a(2),P(e.title||e.name)}}function Y(s,o){if(s&1&&(i(0,"span",27),r(1),n()),s&2){let e=C().$implicit;a(),f(" as ",e.character||e.job," ")}}function q(s,o){if(s&1&&(i(0,"div",23)(1,"span",24),r(2),n(),i(3,"span",25),r(4),n(),v(5,Y,2,1,"span",26),n()),s&2){let e=o.$implicit;a(2),f(" ",e.release_date?e.release_date.slice(0,4):e.first_air_date?e.first_air_date.slice(0,4):"\u2014"," "),a(2),f(" ",e.title||e.name," "),a(),_("ngIf",e.character||e.job)}}function H(s,o){if(s&1&&(i(0,"option",28),r(1),n()),s&2){let e=o.$implicit;_("value",e),a(),f(" ",e," ")}}var R=class s{constructor(o,e){this.route=o;this.tmdbService=e}person=h(null);knownFor=h([]);showFullBio=h(!1);allCredits=h([]);filteredCredits=h([]);selectedMediaType=h("all");selectedDepartment=h("");availableDepartments=h([]);isLongBiography=N(()=>(this.person()?.biography||"").split(" ").length>60);getGender(o){switch(o){case 1:return"Female";case 2:return"Male";case 3:return"Non-Binary";default:return"N/A"}}formatDate(o,e){if(!o)return"N/A";let t=new Date(o),l=(e?new Date(e):new Date).getFullYear()-t.getFullYear();return`${t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})} (${l} years old)`}effect=B(()=>{this.filterCredits()});ngOnInit(){let o=Number(this.route.snapshot.paramMap.get("id"));this.tmdbService.getPersonDetails(o).subscribe(e=>{this.person.set(e)}),this.tmdbService.getPersonCredits(o).subscribe(e=>{let t=[10767,10763,10764,10762,99,10766,10770],d=[...e.cast.map(p=>E(S({},p),{department:"Acting"})),...e.crew].filter(p=>{let c=!!p.poster_path,x=["movie","tv"].includes(p.media_type),b=p.genre_ids?.some(y=>t.includes(y));return c&&x&&!b}),l=new Map;for(let p of d)l.has(p.id)||l.set(p.id,p);let m=Array.from(l.values()).sort((p,c)=>{let x=(p.vote_average??0)*Math.log((p.vote_count??0)+1);return(c.vote_average??0)*Math.log((c.vote_count??0)+1)-x});this.knownFor.set(m.slice(0,8)),this.allCredits.set(m),this.filterCredits();let g=new Set;for(let p of m){let c=p.department||p.known_for_department;c&&g.add(c)}this.availableDepartments.set(Array.from(g).sort())})}toggleBiography(){this.showFullBio.update(o=>!o)}filterCredits(){let o=this.selectedMediaType(),e=this.selectedDepartment(),t=this.person()?.birthday?new Date(this.person().birthday):null,d=this.allCredits();o!=="all"&&(d=d.filter(l=>l.media_type===o)),e!==""&&(d=d.filter(l=>l.department===e||l.known_for_department===e)),d=d.filter(l=>{let u=l.release_date||l.first_air_date;if(!u)return!1;let m=new Date(u);return!(isNaN(m.getTime())||t&&m<t)}).sort((l,u)=>{let m=g=>{let p=g.release_date||g.first_air_date,c=Date.parse(p);return isNaN(c)?0:c};return m(u)-m(l)}),this.filteredCredits.set(d)}clearFilters(){this.selectedMediaType.set("all"),this.selectedDepartment.set(""),this.filteredCredits.set(this.allCredits())}static \u0275fac=function(e){return new(e||s)(D(L),D(j))};static \u0275cmp=F({type:s,selectors:[["app-person-details"]],decls:58,vars:16,consts:[[1,"person-details-container"],[1,"left-side"],[1,"person-image",3,"src","alt"],[1,"personal-info"],[4,"ngIf"],[1,"right-side"],[1,"biography"],["class","toggle-bio-btn",3,"click",4,"ngIf"],[1,"known-for-movies"],["class","known-for-card",4,"ngFor","ngForOf"],[1,"credits-container"],[1,"credits-list"],["class","credit-item",4,"ngFor","ngForOf"],[1,"filters"],[3,"change"],["value","all"],["value","movie"],["value","tv"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"toggle-bio-btn",3,"click"],[1,"known-for-card"],[3,"src","alt"],[1,"credit-item"],[1,"year"],[1,"title"],["class","role",4,"ngIf"],[1,"role"],[3,"value"]],template:function(e,t){if(e&1&&(i(0,"div",0)(1,"div",1),O(2,"img",2),i(3,"div",3)(4,"h3"),r(5,"Personal Info"),n(),i(6,"p")(7,"strong"),r(8,"Known for: "),n(),r(9),n(),i(10,"p")(11,"strong"),r(12,"Gender: "),n(),r(13),n(),i(14,"p")(15,"strong"),r(16,"Birthday: "),n(),r(17),n(),v(18,V,4,1,"p",4),i(19,"p")(20,"strong"),r(21,"Place of Birth: "),n(),r(22),n(),i(23,"p")(24,"strong"),r(25,"Also Known As: "),n(),r(26),n()()(),i(27,"div",5)(28,"h1"),r(29),n(),i(30,"h3"),r(31,"Biography"),n(),i(32,"p",6),r(33),n(),v(34,K,2,1,"button",7),i(35,"h3"),r(36,"Known For"),n(),i(37,"div",8),v(38,U,4,3,"div",9),n(),i(39,"h3"),r(40,"Credits"),n(),i(41,"div",10)(42,"div",11),v(43,q,6,3,"div",12),n(),i(44,"div",13)(45,"label")(46,"select",14),w("change",function(l){return t.selectedMediaType.set(l.target.value),t.filterCredits()}),i(47,"option",15),r(48,"All"),n(),i(49,"option",16),r(50,"Movies"),n(),i(51,"option",17),r(52,"Tv Shows"),n()()(),i(53,"label")(54,"select",14),w("change",function(l){return t.selectedDepartment.set(l.target.value),t.filterCredits()}),i(55,"option",18),r(56,"All Departments"),n(),v(57,H,2,2,"option",19),n()()()()()()),e&2){let d,l,u,m,g,p,c,x,b,y;a(2),_("src","https://image.tmdb.org/t/p/w185"+((d=t.person())==null?null:d.profile_path),M)("alt",(l=t.person())==null?null:l.name),a(7),f("",((u=t.person())==null?null:u.known_for_department)||"N/A"," "),a(4),P(t.getGender((m=t.person())==null?null:m.gender)),a(4),f("",t.formatDate((g=t.person())==null?null:g.birthday,((g=t.person())==null?null:g.deathday)||void 0)," "),a(),_("ngIf",(p=t.person())==null?null:p.deathday),a(4),f("",((c=t.person())==null?null:c.place_of_birth)||"N/A"," "),a(4),f("",((x=t.person())==null?null:x.also_known_as)||"N/A"," "),a(3),P((b=t.person())==null?null:b.name),a(3),T("clamped",!t.showFullBio()),a(),f(" ",((y=t.person())==null?null:y.biography)||"No biography available."," "),a(),_("ngIf",t.isLongBiography()),a(4),_("ngForOf",t.knownFor()),a(5),_("ngForOf",t.filteredCredits()),a(14),_("ngForOf",t.availableDepartments())}},dependencies:[$,z,G],styles:[".person-details-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:30px;padding:30px;max-width:1300px;margin:auto;font-family:Arial,sans-serif}.left-side[_ngcontent-%COMP%]{width:250px;flex-shrink:0}.person-image[_ngcontent-%COMP%]{width:100%;border-radius:8px}.personal-info[_ngcontent-%COMP%]{width:100%;background-color:#f5f5f5;padding:16px;border-radius:8px;font-size:14px;margin-top:20px}.personal-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.right-side[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.right-side[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{max-width:500px;margin-top:0;font-size:32px;color:#fff}.right-side[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:20px;font-size:25px}.biography[_ngcontent-%COMP%]{margin-bottom:32px;line-height:1.5;color:#fff}.known-for-movies[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.known-for-card[_ngcontent-%COMP%]{width:140px;text-align:center}.known-for-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:4px;margin-bottom:8px}.known-for-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#fff}.biography[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;transition:all .3s ease}.biography.clamped[_ngcontent-%COMP%]{-webkit-line-clamp:10;line-clamp:10}.toggle-bio-btn[_ngcontent-%COMP%]{background-color:var(--logo-color);color:#fff;border:none;padding:8px 14px;border-radius:6px;cursor:pointer;font-size:14px}.toggle-bio-btn[_ngcontent-%COMP%]:hover{background-color:var(--btn-hover)}.credits-container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:flex-start;color:#fff}.credits-list[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;max-width:600px;gap:10px}.credit-item[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center;font-size:16px}.credit-item[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%]{font-weight:700;width:60px}.credit-item[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-style:italic;color:#e3b7b7}.filters[_ngcontent-%COMP%]{display:flex;gap:10px}.filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:transparent;color:#fff;font-size:16px;font-family:Verdana,Geneva,Tahoma,sans-serif;border:none;cursor:pointer}.filters[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000;background-color:#fff}"]})};export{R as PersonDetailsComponent};
