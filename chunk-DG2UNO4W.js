import{a as L}from"./chunk-GV5T73XR.js";import{Ga as r,Ha as y,Ia as g,L as k,M as I,S as x,U as M,W as a,Y as O,Za as N,_ as F,_a as B,a as S,b as E,cb as z,da as v,db as j,ga as _,ia as T,ib as G,oa as i,pa as n,qa as D,rb as $,ua as A,wa as P,xa as C}from"./chunk-BUJXTFFG.js";function V(s,o){if(s&1&&(i(0,"p")(1,"strong"),r(2,"Died: "),n(),r(3),n()),s&2){let e,t=C();a(3),g("",t.formatDate((e=t.person())==null?null:e.deathday,(e=t.person())==null?null:e.deathday)," ")}}function K(s,o){if(s&1){let e=A();i(0,"button",20),P("click",function(){k(e);let c=C();return I(c.toggleBiography())}),r(1),n()}if(s&2){let e=C();a(),g(" ",e.showFullBio()?"Show Less":"Read More"," ")}}function U(s,o){if(s&1&&(i(0,"div",21),D(1,"img",22),i(2,"p"),r(3),n()()),s&2){let e=o.$implicit;a(),_("src","https://image.tmdb.org/t/p/w185"+e.poster_path,M)("alt",e.title||e.name),a(2),y(e.title||e.name)}}function Y(s,o){if(s&1&&(i(0,"span",27),r(1),n()),s&2){let e=C().$implicit;a(),g(" as ",e.character||e.job," ")}}function q(s,o){if(s&1&&(i(0,"div",23)(1,"span",24),r(2),n(),i(3,"span",25),r(4),n(),v(5,Y,2,1,"span",26),n()),s&2){let e=o.$implicit;a(2),g(" ",e.release_date?e.release_date.slice(0,4):e.first_air_date?e.first_air_date.slice(0,4):"\u2014"," "),a(2),g(" ",e.title||e.name," "),a(),_("ngIf",e.character||e.job)}}function H(s,o){if(s&1&&(i(0,"option",28),r(1),n()),s&2){let e=o.$implicit;_("value",e),a(),g(" ",e," ")}}var R=class s{constructor(o,e){this.route=o;this.tmdbService=e}person=x(null);knownFor=x([]);showFullBio=x(!1);allCredits=x([]);filteredCredits=x([]);selectedMediaType=x("all");selectedDepartment=x("");availableDepartments=x([]);isLongBiography=N(()=>(this.person()?.biography||"").split(" ").length>60);getGender(o){switch(o){case 1:return"Female";case 2:return"Male";case 3:return"Non-Binary";default:return"N/A"}}formatDate(o,e){if(!o)return"N/A";let t=new Date(o),l=(e?new Date(e):new Date).getFullYear()-t.getFullYear();return`${t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})} (${l} years old)`}effect=B(()=>{this.filterCredits()});ngOnInit(){let o=Number(this.route.snapshot.paramMap.get("id"));this.tmdbService.getPersonDetails(o).subscribe(e=>{this.person.set(e)}),this.tmdbService.getPersonCredits(o).subscribe(e=>{let t=[10767,10763,10764,10762,99,10766,10770],c=[...e.cast.map(p=>E(S({},p),{department:"Acting"})),...e.crew].filter(p=>{let d=!!p.poster_path,h=["movie","tv"].includes(p.media_type),w=p.genre_ids?.some(b=>t.includes(b));return d&&h&&!w}),l=new Map;for(let p of c)l.has(p.id)||l.set(p.id,p);let m=Array.from(l.values()).sort((p,d)=>{let h=(p.vote_average??0)*Math.log((p.vote_count??0)+1);return(d.vote_average??0)*Math.log((d.vote_count??0)+1)-h});this.knownFor.set(m.slice(0,8)),this.allCredits.set(m),this.filterCredits();let f=new Set;for(let p of m){let d=p.department||p.known_for_department;d&&f.add(d)}this.availableDepartments.set(Array.from(f).sort())})}toggleBiography(){this.showFullBio.update(o=>!o)}filterCredits(){let o=this.selectedMediaType(),e=this.selectedDepartment(),t=this.person()?.birthday?new Date(this.person().birthday):null,c=this.allCredits();o!=="all"&&(c=c.filter(l=>l.media_type===o)),e!==""&&(c=c.filter(l=>l.department===e||l.known_for_department===e)),c=c.filter(l=>{let u=l.release_date||l.first_air_date;if(!u)return!1;let m=new Date(u);return!(isNaN(m.getTime())||t&&m<t)}).sort((l,u)=>{let m=f=>{let p=f.release_date||f.first_air_date,d=Date.parse(p);return isNaN(d)?0:d};return m(u)-m(l)}),this.filteredCredits.set(c)}clearFilters(){this.selectedMediaType.set("all"),this.selectedDepartment.set(""),this.filteredCredits.set(this.allCredits())}static \u0275fac=function(e){return new(e||s)(O($),O(L))};static \u0275cmp=F({type:s,selectors:[["app-person-details"]],decls:58,vars:16,consts:[[1,"person-details-container"],[1,"left-side"],[1,"person-image",3,"src","alt"],[1,"personal-info"],[4,"ngIf"],[1,"right-side"],[1,"biography"],["class","toggle-bio-btn",3,"click",4,"ngIf"],[1,"known-for-movies"],["class","known-for-card",4,"ngFor","ngForOf"],[1,"credits-container"],[1,"credits-list"],["class","credit-item",4,"ngFor","ngForOf"],[1,"filters"],[3,"change"],["value","all"],["value","movie"],["value","tv"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"toggle-bio-btn",3,"click"],[1,"known-for-card"],[3,"src","alt"],[1,"credit-item"],[1,"year"],[1,"title"],["class","role",4,"ngIf"],[1,"role"],[3,"value"]],template:function(e,t){if(e&1&&(i(0,"div",0)(1,"div",1),D(2,"img",2),i(3,"div",3)(4,"h3"),r(5,"Personal Info"),n(),i(6,"p")(7,"strong"),r(8,"Known for: "),n(),r(9),n(),i(10,"p")(11,"strong"),r(12,"Gender: "),n(),r(13),n(),i(14,"p")(15,"strong"),r(16,"Birthday: "),n(),r(17),n(),v(18,V,4,1,"p",4),i(19,"p")(20,"strong"),r(21,"Place of Birth: "),n(),r(22),n(),i(23,"p")(24,"strong"),r(25,"Also Known As: "),n(),r(26),n()()(),i(27,"div",5)(28,"h1"),r(29),n(),i(30,"h3"),r(31,"Biography"),n(),i(32,"p",6),r(33),n(),v(34,K,2,1,"button",7),i(35,"h3"),r(36,"Known For"),n(),i(37,"div",8),v(38,U,4,3,"div",9),n(),i(39,"h3"),r(40,"Credits"),n(),i(41,"div",10)(42,"div",11),v(43,q,6,3,"div",12),n(),i(44,"div",13)(45,"label")(46,"select",14),P("change",function(l){return t.selectedMediaType.set(l.target.value),t.filterCredits()}),i(47,"option",15),r(48,"All"),n(),i(49,"option",16),r(50,"Movies"),n(),i(51,"option",17),r(52,"Tv Shows"),n()()(),i(53,"label")(54,"select",14),P("change",function(l){return t.selectedDepartment.set(l.target.value),t.filterCredits()}),i(55,"option",18),r(56,"All Departments"),n(),v(57,H,2,2,"option",19),n()()()()()()),e&2){let c,l,u,m,f,p,d,h,w,b;a(2),_("src","https://image.tmdb.org/t/p/w185"+((c=t.person())==null?null:c.profile_path),M)("alt",(l=t.person())==null?null:l.name),a(7),g("",((u=t.person())==null?null:u.known_for_department)||"N/A"," "),a(4),y(t.getGender((m=t.person())==null?null:m.gender)),a(4),g("",t.formatDate((f=t.person())==null?null:f.birthday,((f=t.person())==null?null:f.deathday)||void 0)," "),a(),_("ngIf",(p=t.person())==null?null:p.deathday),a(4),g("",((d=t.person())==null?null:d.place_of_birth)||"N/A"," "),a(4),g("",((h=t.person())==null?null:h.also_known_as)||"N/A"," "),a(3),y((w=t.person())==null?null:w.name),a(3),T("clamped",!t.showFullBio()),a(),g(" ",((b=t.person())==null?null:b.biography)||"No biography available."," "),a(),_("ngIf",t.isLongBiography()),a(4),_("ngForOf",t.knownFor()),a(5),_("ngForOf",t.filteredCredits()),a(14),_("ngForOf",t.availableDepartments())}},dependencies:[G,z,j],styles:[".person-details-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:clamp(16px,3vw,30px);max-width:1300px;margin:auto;font-family:Arial,sans-serif}.left-side[_ngcontent-%COMP%]{width:clamp(180px,20vw,250px);flex-shrink:0}.person-image[_ngcontent-%COMP%]{width:100%;border-radius:8px}.personal-info[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:clamp(12px,2vw,16px);border-radius:8px;font-size:clamp(12px,1.4vw,14px);margin-top:clamp(12px,2vw,20px)}.personal-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:clamp(14px,1.5vw,16px)}.right-side[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.right-side[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{max-width:100%;margin-top:0;font-size:clamp(20px,3vw,32px);color:#fff}.right-side[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:clamp(16px,2vw,20px);font-size:clamp(18px,2.2vw,25px)}.biography[_ngcontent-%COMP%]{margin-bottom:clamp(20px,3vw,32px);line-height:1.5;color:#fff}.known-for-movies[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:clamp(8px,1.5vw,16px)}.known-for-card[_ngcontent-%COMP%]{width:clamp(110px,12vw,140px);text-align:center}.known-for-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:4px;margin-bottom:8px}.known-for-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:clamp(12px,1.3vw,14px);color:#fff}.biography[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;transition:all .3s ease}.biography.clamped[_ngcontent-%COMP%]{-webkit-line-clamp:10;line-clamp:10}.toggle-bio-btn[_ngcontent-%COMP%]{background-color:var(--logo-color);color:#000;font-weight:500;border:none;padding:clamp(6px,1vw,8px) clamp(10px,1.5vw,14px);border-radius:6px;cursor:pointer;font-size:clamp(12px,1.4vw,14px)}.toggle-bio-btn[_ngcontent-%COMP%]:hover{background-color:var(--btn-hover)}.credits-container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;gap:clamp(12px,2vw,20px);color:#fff}.credits-list[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:clamp(8px,1.5vw,10px)}.credit-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:clamp(12px,2vw,20px);align-items:center;font-size:clamp(14px,1.5vw,16px)}.credit-item[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%]{font-weight:700;flex:0 0 clamp(40px,6vw,60px)}.credit-item[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{flex:0 1 auto;font-style:italic;color:#e3b7b7;min-width:clamp(100px,25vw,200px);text-align:right}.credit-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:1 1 auto;min-width:clamp(120px,40vw,300px);word-break:break-word}.filters[_ngcontent-%COMP%]{display:flex;gap:clamp(8px,1.5vw,10px);flex-wrap:wrap}.filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:transparent;color:#fff;font-size:clamp(14px,1.5vw,16px);font-family:Verdana,Geneva,Tahoma,sans-serif;border:none;cursor:pointer}.filters[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000;background-color:#fff}@media (max-width: 768px){.person-details-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.left-side[_ngcontent-%COMP%]{width:100%;max-width:300px}.personal-info[_ngcontent-%COMP%]{text-align:left}.right-side[_ngcontent-%COMP%]{width:100%;align-items:center}.right-side[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .right-side[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .biography[_ngcontent-%COMP%]{text-align:center}.known-for-movies[_ngcontent-%COMP%]{justify-content:center}.credits-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.credits-list[_ngcontent-%COMP%]{width:100%;max-width:100%}.credit-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.credit-item[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%], .credit-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .credit-item[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{flex:0 0 auto;min-width:auto;text-align:left}.filters[_ngcontent-%COMP%]{justify-content:center}}"]})};export{R as PersonDetailsComponent};
