import{a as W}from"./chunk-PCJYLEWP.js";import{a as K}from"./chunk-GV5T73XR.js";import{Aa as S,Fa as E,Ga as l,H as u,Ha as M,Ia as y,Ja as q,L as h,M as v,S as g,Sa as O,U as P,Ua as z,Va as L,W as i,Wa as V,_ as I,_a as $,cb as D,da as m,db as F,fb as N,ga as a,hb as j,ib as U,k as R,ka as T,oa as r,pa as s,qa as f,ra as b,rb as A,sa as w,tb as B,ua as x,wa as C,x as k,xa as c}from"./chunk-BUJXTFFG.js";function H(t,n){if(t&1&&(r(0,"div",13),f(1,"img",14),s()),t&2){let e=c(2).$implicit;i(),S("alt",e.title||e.name),a("src","https://image.tmdb.org/t/p/w185"+e.poster_path,P)}}function J(t,n){if(t&1&&(b(0),l(1),O(2,"date"),w()),t&2){let e=c(2).$implicit;i(),y(" ",z(2,1,e.release_date||e.first_air_date,"longDate")," ")}}function Q(t,n){t&1&&l(0," N/A ")}function X(t,n){if(t&1){let e=x();r(0,"div",6),C("click",function(){h(e);let p=c().$implicit,_=c();return v(_.navigateTo(p))}),m(1,H,2,2,"div",7),r(2,"div",8)(3,"h3"),l(4),s(),r(5,"p",9),f(6,"i",10),m(7,J,3,4,"ng-container",11)(8,Q,1,0,"ng-template",null,0,V),s(),r(10,"p",12),l(11),O(12,"slice"),s()()()}if(t&2){let e=E(9),o=c().$implicit;i(),a("ngIf",o.poster_path),i(3),M(o.name||o.title),i(3),a("ngIf",o.release_date||o.first_air_date)("ngIfElse",e),i(4),y(" ",L(12,5,o.overview||"No description available",0,100)," ")}}function Y(t,n){if(t&1&&(r(0,"div",13),f(1,"img",18),s()),t&2){let e=c(2).$implicit;i(),S("alt",e.name),a("src","https://image.tmdb.org/t/p/w185"+e.profile_path,P)}}function Z(t,n){if(t&1&&(r(0,"li"),l(1),s()),t&2){let e=n.$implicit;i(),q(" ",e.title||e.name," (",e.media_type,") ")}}function ee(t,n){if(t&1){let e=x();r(0,"div",15),C("click",function(){h(e);let p=c().$implicit,_=c();return v(_.navigateTo(p))}),m(1,Y,2,2,"div",7),r(2,"div",16)(3,"h3"),l(4),s(),r(5,"p",17),l(6,"Known For:"),s(),r(7,"ul"),m(8,Z,2,2,"li",2),s()()()}if(t&2){let e=c().$implicit;i(),a("ngIf",e.profile_path),i(3),M(e.name),i(4),a("ngForOf",e.known_for==null?null:e.known_for.slice(0,3))}}function te(t,n){if(t&1&&(b(0),m(1,X,13,9,"div",4)(2,ee,9,3,"div",5),w()),t&2){let e=n.$implicit;i(),a("ngIf",e.media_type==="movie"||e.media_type==="tv"),i(),a("ngIf",e.media_type==="person")}}function ne(t,n){if(t&1){let e=x();r(0,"div",19)(1,"button",20),C("click",function(){h(e);let p=c();return v(p.loadMore())}),l(2),s()()}if(t&2){let e=c();i(),a("disabled",e.isLoading()),i(),y(" ",e.isLoading()?"Loading...":"Load More"," ")}}function ie(t,n){t&1&&f(0,"app-spinner")}var G=class t{route=u(A);router=u(B);tmdbService=u(K);results=[];query=g({});searchResults=g([]);currentPage=g(1);totalPages=g(1);isLoading=g(!1);constructor(){R(this.route.queryParams).pipe(k({})).subscribe(n=>this.query.set(n)),$(()=>{let n=this.query()?.query?.trim()||"",e=this.currentPage();n?this.loadResults(e===1):(this.searchResults.set([]),this.totalPages.set(1))})}loadResults(n=!1){let e=this.query()?.query?.trim()||"",o=this.currentPage();e&&(this.isLoading.set(!0),this.tmdbService.multiSearch(e,o).subscribe(p=>{let _=(p.results||[]).filter(d=>d.media_type==="movie"||d.media_type==="tv"?!!d.poster_path:d.media_type==="person"?!!d.profile_path:!1);if(n)this.searchResults.set(_);else{let d=this.searchResults();this.searchResults.set([...d,..._])}this.totalPages.set(p.total_pages),this.isLoading.set(!1)}))}loadMore(){this.currentPage()<this.totalPages()&&!this.isLoading()&&this.currentPage.set(this.currentPage()+1)}navigateTo(n){switch(n.media_type){case"movie":this.router.navigate(["/movie",n.id]);break;case"tv":this.router.navigate(["/tv",n.id]);break;case"person":this.router.navigate(["/person",n.id]);break;default:console.warn("Unknown media type",n.media_type)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=I({type:t,selectors:[["app-search-results"]],inputs:{results:"results"},decls:4,vars:3,consts:[["noDate",""],[1,"search-results-container"],[4,"ngFor","ngForOf"],["class","load-more-btn-container",4,"ngIf"],["class","movie-card","role","button",3,"click",4,"ngIf"],["class","person-card","role","button",3,"click",4,"ngIf"],["role","button",1,"movie-card",3,"click"],["class","img-container",4,"ngIf"],[1,"movie-info"],[1,"release-date"],[1,"fa-solid","fa-calendar"],[4,"ngIf","ngIfElse"],[1,"overview"],[1,"img-container"],[1,"poster",3,"src","alt"],["role","button",1,"person-card",3,"click"],[1,"person-info"],[1,"known-for"],[1,"profile-picture",3,"src","alt"],[1,"load-more-btn-container"],[3,"click","disabled"]],template:function(e,o){e&1&&(r(0,"div",1),m(1,te,3,2,"ng-container",2)(2,ne,3,2,"div",3),s(),m(3,ie,1,0,"app-spinner")),e&2&&(i(),a("ngForOf",o.searchResults()),i(),a("ngIf",o.currentPage()<o.totalPages()),i(),T(o.isLoading()?3:-1))},dependencies:[U,D,F,j,N,W],styles:[".search-results-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:1.5rem;padding:1.5rem 2rem;background-color:#f5f5f5;min-height:50vh}.movie-card[_ngcontent-%COMP%], .person-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;border-radius:12px;box-shadow:0 4px 12px #00000014;cursor:pointer;overflow:hidden;width:200px}.poster[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:cover}.movie-info[_ngcontent-%COMP%], .person-info[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.85rem;flex-grow:1}.movie-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .person-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:700;color:#333}.release-date[_ngcontent-%COMP%], .known-for[_ngcontent-%COMP%]{font-size:.9rem;color:#777;margin:.5rem 0}.overview[_ngcontent-%COMP%]{font-size:.95rem;color:#555;margin-top:.5rem}.person-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.9rem;color:#444}.img-container[_ngcontent-%COMP%]{width:100%;aspect-ratio:2/3;flex-shrink:0;overflow:hidden;background-color:#ddd}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.load-more-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:1.5rem 0;width:100%;box-sizing:border-box}.load-more-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px;padding:.6rem 1.2rem;font-size:1rem;border-radius:8px;cursor:pointer;background-color:var(--logo-color);font-weight:700;width:300px;align-self:center}@media screen and (max-width: 768px){.movie-card[_ngcontent-%COMP%], .person-card[_ngcontent-%COMP%]{width:90%}}"]})};export{G as a};
